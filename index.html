<!DOCTYPE html>
<html lang="en">
<head>

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no" />
<meta name="author" content="原豪" />


    
    


<meta name="description" content="记录我的点点滴滴">
<meta property="og:type" content="website">
<meta property="og:title" content="原豪的个人博客">
<meta property="og:url" content="http://yuanhao.space/index.html">
<meta property="og:site_name" content="原豪的个人博客">
<meta property="og:description" content="记录我的点点滴滴">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="原豪的个人博客">
<meta name="twitter:description" content="记录我的点点滴滴">

<link rel="apple-touch-icon" href= "/apple-touch-icon.png">


    <link rel="alternative" href="/atom.xml" title="原豪的个人博客" type="application/atom+xml">



    <link rel="shortcut icon" href="/favicon.png">



    <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">


    <style> .article { opacity: 0;} </style>


<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>原豪的个人博客</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: true,
        isPost: false,
        isArchive: false,
        isTag: false,
        isCategory: false,
        open_in_new: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: undefined
    }
</script>


    <script> yiliaConfig.jquery_ui = [false]; </script>



    <script> yiliaConfig.rootUrl = "\/";</script>






</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/img/avatar.png" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">原豪</a></h1>
        </hgroup>

        

        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>Menu</li>
                        <li>Tags</li>
                        
                        <li>Friends</li>
                        
                        
                        <li>About Me</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                            <li><a href="/about/">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:153516796@qq.com" title="Email"></a>
                            
                                <a class="fa GitHub" target="_blank" href="#" title="GitHub"></a>
                            
                                <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="https://hexo.io">Hexo</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="https://pages.github.com/">GitHub</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://yuanhao.space/">MOxFIVE</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">专注与大数据</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">原豪</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/img/avatar.png" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">原豪</a></h1>
            </hgroup>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:153516796@qq.com" title="Email"></a>
                            
                                <a class="fa GitHub" target="_blank" href="#" title="GitHub"></a>
                            
                                <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="Tags" friends="Friends" about="About Me"/>
</nav>
      <div class="body-wrap">
  
    <article id="post-心得" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/06/20/心得/" class="article-date">
      <time datetime="2016-06-20T05:47:32.000Z" itemprop="datePublished">2016-06-20</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/20/心得/">我的生活</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>记录我的生活……</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-计算机基础及Linux入门" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/06/18/计算机基础及Linux入门/" class="article-date">
      <time datetime="2016-06-18T13:42:01.000Z" itemprop="datePublished">2016-06-18</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/18/计算机基础及Linux入门/">计算机基础及linux入门</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h4 id="计算机是-电子数字计算机的简称。"><a href="#计算机是-电子数字计算机的简称。" class="headerlink" title="计算机是 电子数字计算机的简称。"></a>计算机是 电子数字计算机的简称。</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">程序和数据 成为计算机软件。</span><br><span class="line">pc服务器：1U=4.445cm</span><br><span class="line">互联网企业都用戴尔服务器。其次 惠普、IBM</span><br><span class="line">BIOS芯片 主板通电后各部件自检，设置，保存，一切正常后才能启动操作系统。记录了电脑最基本的信息，是软件与硬件打交道的最基础的桥梁。</span><br><span class="line">硬盘未来是调优的关键点，硬盘的性能是决定网站的新年能的重要因素。</span><br><span class="line">磁盘和内存的优化：</span><br><span class="line">1、内存临时储存用户的数据，然后再写到disk中。（门户网站）</span><br><span class="line">     1）速度快     2）丢数据</span><br><span class="line">2、写时：用户数据写到disk中，读时：数据再读到内存中再发给用户。 （并发量不大的中小企业）</span><br><span class="line">     1）性能低     2）不丢数据</span><br></pre></td></tr></table></figure>
<h4 id="生产中的硬件应用小结"><a href="#生产中的硬件应用小结" class="headerlink" title="生产中的硬件应用小结"></a>生产中的硬件应用小结</h4><h5 id="1、PC服务器"><a href="#1、PC服务器" class="headerlink" title="1、PC服务器"></a>1、PC服务器</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">互联网公司，品牌DELL，HP，IBM。</span><br><span class="line">Dell品牌：2010年以前 1U的1850 1950，2U的2850 2950</span><br><span class="line">2010到2014：1U的R410/420 R610/620</span><br><span class="line">IBM： 2U的3750/3850/3950</span><br></pre></td></tr></table></figure>
<h6 id="2、内存"><a href="#2、内存" class="headerlink" title="2、内存"></a>2、内存</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">进程：运行着的程序，进程会放在内存里。</span><br><span class="line">程序：静态的，在磁盘里。</span><br></pre></td></tr></table></figure>
<h5 id="企业案例："><a href="#企业案例：" class="headerlink" title="企业案例："></a>企业案例：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1）、门户极端案例：高并发，大数据量：会把数据先写到内存，然后在定时或者定量的写到磁盘，最终还是会加载到内存。</span><br><span class="line">特点：</span><br><span class="line">a、高并发的写入性能高。</span><br><span class="line">b、可能会丢失一部分在内存中还没来得及存入磁盘的数据。</span><br><span class="line">2）、中小企业案例：并发不是很大网站，会先把数据存放到磁盘，然后通过程序吧数据读入到内存里，再对外提供访问服务。</span><br><span class="line">由于90%的是网站都是读取为主，写入为辅，读写比例10：1，所以并发写入不是问题。</span><br><span class="line">提醒：这里的内存和硬盘，可能是多台机器组成的。</span><br></pre></td></tr></table></figure>
<h5 id="3、磁盘"><a href="#3、磁盘" class="headerlink" title="3、磁盘"></a>3、磁盘</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">磁盘接口：SAS SATA（这两个都是机械硬盘） SSD（固态硬盘）</span><br><span class="line">性能：SSD&gt;SATA&gt;SAS，</span><br><span class="line">应用：常规工作场景选SAS（转速15K）；</span><br><span class="line">          SATA（转速7.2K-1W）线下的备份；</span><br><span class="line">          高并发SSD。</span><br><span class="line">淘宝网：SATA和SSD混合起来用。</span><br></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Linux 必须掌握的30个命令" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/06/17/Linux 必须掌握的30个命令/" class="article-date">
      <time datetime="2016-06-17T00:18:26.000Z" itemprop="datePublished">2016-06-17</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/17/Linux 必须掌握的30个命令/">Linux 必须掌握的30个命令</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>######ls -l(long)d(directory)<br></p>
<p>######cd<br></p>
<p>######mkdir<br></p>
<p>######touch<br></p>
<p>######pwd<br></p>
<p>######vi/vim<br></p>
<p>######cat     cat &gt;&gt;o.txt&lt;<ddddd<br><br>          1<br>          2<br>          3<br>          ddddd</ddddd<br></p>
<p>######echo “linux” &gt;(&gt;&gt;) o.txt  覆盖重定向/追加重定向</p>
<p>######cp o.txt /tmp/ 拷贝文件</p>
<p>######cp -a /etc/ /tmp/ 拷贝目录</p>
<p>######mv /data /root/ 拷贝data目录到root目录下</p>
<p>######rm o.txt</p>
<p>######rmdir data 或者是 rm -fr data</p>
<p>######head</p>
<p>######tail</p>
<p>######grep 核心命令之一（三剑客的老三）</p>
<p>######sed（三剑客的老二）</p>
<p>######awk（三剑客的老大）</p>
<p>######tab键 非常实用的快捷键</p>
<p>######alias 别名</p>
<p>######unaries 取消别名</p>
<p>######which 查看命令的路径</p>
<p>######find / -type f -name “cat” 查找从/目录下文件类型且名字为cat</p>
<p>######find / -type f -name “test.txt”</p>
<p>######find / -type f -name “test.txt”|xargs rm -f</p>
<p>######find /root/ -type f -mtime -5（+5 5天前） 查找root下五天以内修改过的文件</p>
<p>######find /root/ -type f -mtime -5|xargs rm -f删除过期数据</p>
<p>######seq 6          打印出一个序列</p>
<p>######seq -s “ “ 5  横向打印<br>    seq  2 5       打印出2到5<br>    seq 1 2 9     1到9每次相差2<br>    seq 1 5|tac   倒序<br>    set nu          显示行号<br>    sed -n 20,30p err.txt</p>
<p>######head -30 ett.txt|tail -11     打印20到30行</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-hadoop生态" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/06/16/hadoop生态/" class="article-date">
      <time datetime="2016-06-16T07:45:16.000Z" itemprop="datePublished">2016-06-16</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/16/hadoop生态/">hadoop 生态</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>稍后发布。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Linux 下oracle的安装" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/06/14/Linux 下oracle的安装/" class="article-date">
      <time datetime="2016-06-14T06:05:34.000Z" itemprop="datePublished">2016-06-14</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/14/Linux 下oracle的安装/">Linux 下oracle的安装</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="一、关闭防火墙"><a href="#一、关闭防火墙" class="headerlink" title="一、关闭防火墙"></a>一、关闭防火墙</h2><h3 id="1-1-怎样查看iptables和SElinux状态："><a href="#1-1-怎样查看iptables和SElinux状态：" class="headerlink" title="1.1 怎样查看iptables和SElinux状态："></a>1.1 怎样查看iptables和SElinux状态：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">service iptables status</span><br><span class="line">getenforce</span><br></pre></td></tr></table></figure>
<h3 id="1-2-关闭iptables和SElinux："><a href="#1-2-关闭iptables和SElinux：" class="headerlink" title="1.2 关闭iptables和SElinux："></a>1.2 关闭iptables和SElinux：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">service iptables stop   #临时关闭防火墙</span><br><span class="line">chkconfig iptables off    #永久关闭防火墙，开机不自启动，想自启动改成on</span><br><span class="line">setenforce 0    #临时关闭SElinux,临时打开SElinux状态命令：setenforce 1</span><br></pre></td></tr></table></figure>
<h3 id="1-3-永久关闭SElinux"><a href="#1-3-永久关闭SElinux" class="headerlink" title="1.3 永久关闭SElinux"></a>1.3 永久关闭SElinux</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/selinux/config,然后将SELINUX改成disabled，这样即使重启操作系统SElinux也是关闭状态。</span><br></pre></td></tr></table></figure>
<h3 id="1-4-查看SElinux状态："><a href="#1-4-查看SElinux状态：" class="headerlink" title="1.4 查看SElinux状态："></a>1.4 查看SElinux状态：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/sbin/sestatus -v</span><br></pre></td></tr></table></figure>
<h2 id="二、linux-CentOS-RedHat-命令行永久修改IP地址、网关、DNS"><a href="#二、linux-CentOS-RedHat-命令行永久修改IP地址、网关、DNS" class="headerlink" title="二、linux CentOS(RedHat)命令行永久修改IP地址、网关、DNS"></a>二、linux CentOS(RedHat)命令行永久修改IP地址、网关、DNS</h2><h3 id="2-1-设置IP"><a href="#2-1-设置IP" class="headerlink" title="2.1 设置IP"></a>2.1 设置IP</h3><p>[root@localhost etc]# vi /etc/sysconfig/network-scripts/ifcfg-eth0</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">DEVICE=eth0</span><br><span class="line">BOOTPROTO=static</span><br><span class="line">ONBOOT=yes</span><br><span class="line">HWADDR=00:16:36:66:a3:ec</span><br><span class="line">IPADDR=10.0.0.11</span><br><span class="line">NETMASK=255.255.255.0</span><br><span class="line">GATEWAY=10.0.0.1</span><br><span class="line">TYPE=Ethernet</span><br><span class="line">USERCTL=no</span><br><span class="line">IPV6INIT=no</span><br><span class="line">PEERDNS=yes</span><br><span class="line">	</span><br><span class="line">#################解释#################</span><br><span class="line"></span><br><span class="line">1.BOOTPROTO=static 就是手动设置静态IP，不需要自动获取(static/dhcp/bootp)</span><br><span class="line">2.USERCTL=no     不允许非root用户控制该设备</span><br><span class="line">3.PEERDNS=no     不修改/etc/resolv.conf(如果使用DHCP，则yes是默认选项)	</span><br><span class="line">4.TYPE=Ethernet 类型以太网	</span><br><span class="line">5.GATEWAY 网关	</span><br><span class="line">6.NETMASK 掩码	</span><br><span class="line">7.ONBOOT=yes 开机重启会自动加载	</span><br><span class="line">Red Hat中没有提供缺省的/etc/resolv.conf文件，它的内容是根据在安装时给出的选项动态创建的。</span><br></pre></td></tr></table></figure>
<h3 id="2-2-修改网关"><a href="#2-2-修改网关" class="headerlink" title="2.2 修改网关"></a>2.2 修改网关</h3><p>vim /etc/sysconfig/network</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">增加一条网关信息</span><br><span class="line">GATEWAY=192.168.1.1</span><br></pre></td></tr></table></figure>
<h3 id="2-3-修改DNS"><a href="#2-3-修改DNS" class="headerlink" title="2.3 修改DNS"></a>2.3 修改DNS</h3><p>vim /etc/resolv.conf</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">增加DNS信息即可</span><br><span class="line">nameserver 192.168.1.1</span><br></pre></td></tr></table></figure>
<h2 id="三、检查必要条件"><a href="#三、检查必要条件" class="headerlink" title="三、检查必要条件"></a>三、检查必要条件</h2><h3 id="3-1、检查内存及交换分区-Oracle要求2GB以上的内存"><a href="#3-1、检查内存及交换分区-Oracle要求2GB以上的内存" class="headerlink" title="3.1、检查内存及交换分区###Oracle要求2GB以上的内存"></a>3.1、检查内存及交换分区###Oracle要求2GB以上的内存</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">·查看内存大小	grep MemTotal /proc/meminfo 	</span><br><span class="line">·查看交换区大小	grep SwapTotal /proc/meminfo	</span><br><span class="line">·也可以使用下面的命令查看内存大小 free -m</span><br></pre></td></tr></table></figure>
<h2 id="四、系统配置"><a href="#四、系统配置" class="headerlink" title="四、系统配置"></a>四、系统配置</h2><p>系统配置说明：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">在安装光盘的iso文件中有个文件夹（package），在虚拟机中加载该iso文件后，可以在linux界面中直接打开光盘，进入该目录，然后右键-&gt;打开终端，在终端中进行安装。</span><br><span class="line">安装时，有些rpm包的版本和本文挡中的不同，可以先用“ls 包名前几个字母”然后按“tab”键，查找到该包名的完整名称，然后拷贝名称后进行安装。</span><br></pre></td></tr></table></figure>
<h3 id="4-1-检查相应的rpm包的情况-等于或者高于下面版本）"><a href="#4-1-检查相应的rpm包的情况-等于或者高于下面版本）" class="headerlink" title="4.1 检查相应的rpm包的情况(等于或者高于下面版本）"></a>4.1 检查相应的rpm包的情况(等于或者高于下面版本）</h3><p>rpm -qa | grep pagename(grep是搜索)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">binutils-2.17.50.0.6</span><br><span class="line">compat-libstdc++-33-3.2.3</span><br><span class="line">compat-libstdc++-33-3.2.3 (32 bit)</span><br><span class="line">elfutils-libelf-0.125</span><br><span class="line">elfutils-libelf-devel-0.125</span><br><span class="line">gcc-4.1.2</span><br><span class="line">gcc-c++-4.1.2</span><br><span class="line">glibc-2.5-24</span><br><span class="line">glibc-2.5-24 (32 bit)</span><br><span class="line">glibc-common-2.5</span><br><span class="line">glibc-devel-2.5</span><br><span class="line">glibc-devel-2.5 (32 bit)</span><br><span class="line">glibc-headers-2.5</span><br><span class="line">ksh-20060214</span><br><span class="line">libaio-0.3.106</span><br><span class="line">libaio-0.3.106 (32 bit)</span><br><span class="line">libaio-devel-0.3.106</span><br><span class="line">libaio-devel-0.3.106 (32 bit)</span><br><span class="line">libgcc-4.1.2</span><br><span class="line">libgcc-4.1.2 (32 bit)</span><br><span class="line">libstdc++-4.1.2</span><br><span class="line">libstdc++-4.1.2 (32 bit)</span><br><span class="line">libstdc++-devel 4.1.2</span><br><span class="line">make-3.81</span><br><span class="line">numactl-devel-0.9.8.x86_64</span><br><span class="line">sysstat-7.0.2</span><br><span class="line">unixODBC-2.2.11</span><br><span class="line">unixODBC-2.2.11 (32 bit)</span><br><span class="line">unixODBC-devel-2.2.11</span><br><span class="line">unixODBC-devel-2.2.11 (32 bit)</span><br></pre></td></tr></table></figure></p>
<h3 id="务必先在光盘中找到以上包名安装后，大约有1-2个包名在光盘中无法找到，可以到我给那你们发送的文件夹中找（只找需要的，不能全部安装）"><a href="#务必先在光盘中找到以上包名安装后，大约有1-2个包名在光盘中无法找到，可以到我给那你们发送的文件夹中找（只找需要的，不能全部安装）" class="headerlink" title="务必先在光盘中找到以上包名安装后，大约有1-2个包名在光盘中无法找到，可以到我给那你们发送的文件夹中找（只找需要的，不能全部安装）"></a>务必先在光盘中找到以上包名安装后，大约有1-2个包名在光盘中无法找到，可以到我给那你们发送的文件夹中找（只找需要的，不能全部安装）</h3><hr>
<p>pdksh-5.2.14-1 —这个包需要下载，安装前需要卸载掉    ksh-20100621-6.el6包在安装oracle11gR2时，需要安装pdksh-5.2.14-1.i386.rpm包。安装该包时，出现了以下问题：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# rpm -Uvh pdksh-5.2.14-1.i386.rpm </span><br><span class="line">error: Failed dependencies:</span><br><span class="line">pdksh conflicts with ksh-20100621-12.el6.i686</span><br></pre></td></tr></table></figure>
<h4 id="解决方法："><a href="#解决方法：" class="headerlink" title="解决方法："></a>解决方法：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost rpm_for_AS6]# rpm -e ksh-20100621-12.el6.i686</span><br><span class="line">[root@localhost ~]# rpm -Uvh pdksh-5.2.14-1.i386.rpm </span><br><span class="line">Preparing...                ########################################### [100%]</span><br><span class="line">1:pdksh                  ########################################### [100%]</span><br></pre></td></tr></table></figure>
<hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rpm -e ksh-20100621-6.el6</span><br><span class="line">安装缺少的rpm包</span><br><span class="line">rpm -ivh pagename(根据提示，如果缺少依赖包，也需要加上去)</span><br></pre></td></tr></table></figure>
<h3 id="4-2-添加组和用户"><a href="#4-2-添加组和用户" class="headerlink" title="4.2 添加组和用户"></a>4.2 添加组和用户</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/usr/sbin/groupadd oinstall（添加oinstall组）</span><br><span class="line">/usr/sbin/groupadd -g 502 dba（添加dba组）</span><br><span class="line">/usr/sbin/useradd -u 502 -g oinstall -G dba oracle（添加用户oracle，主组oinstall，辅助组dba）</span><br><span class="line">passwd oracle（修改oracle用户密码）这里输入：oracle 后重复，不管提示</span><br></pre></td></tr></table></figure>
<h3 id="4-3-创建文件夹并修改组和用户所属关系和相关权限-命令格式：chown-R-用户：用户组-文件夹"><a href="#4-3-创建文件夹并修改组和用户所属关系和相关权限-命令格式：chown-R-用户：用户组-文件夹" class="headerlink" title="4.3 创建文件夹并修改组和用户所属关系和相关权限(命令格式：chown -R 用户：用户组 文件夹)"></a>4.3 创建文件夹并修改组和用户所属关系和相关权限(命令格式：chown -R 用户：用户组 文件夹)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /opt/oracle(创建文件opt/oracle)</span><br><span class="line">chown -R oracle:oinstall /opt/oracle(使得/opt/oracle文件夹输入oracle用户和oinstall组)</span><br><span class="line">chmod -R 775 /opt/oracle(修改opt文件夹访问权限)—可选（最好执行下）</span><br><span class="line">mkdir -p /opt/oradata(创建文件opt/oracle)</span><br><span class="line">chown -R oracle:oinstall /opt/oracle(使得/opt/oradata文件夹输入oracle用户和oinstall组)</span><br><span class="line">chmod -R 775 /opt/oradata(修改opt文件夹访问权限)—可选（最好执行下）</span><br><span class="line">mkdir -p /opt/oraInventory</span><br><span class="line">chown -R oracle:oinstall /opt/oraInventory</span><br><span class="line">chown -R oracle /opt/oraInventory</span><br><span class="line">chmod -R 775 /opt/oraInventory</span><br></pre></td></tr></table></figure>
<h3 id="4-4-添加-etc-hosts中dns解析信息"><a href="#4-4-添加-etc-hosts中dns解析信息" class="headerlink" title="4.4 添加/etc/hosts中dns解析信息"></a>4.4 添加/etc/hosts中dns解析信息</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">192.168.1.102             oracle(自己的主机名)</span><br><span class="line">192.168.1.102             localhost</span><br></pre></td></tr></table></figure>
<h3 id="4-5-在-etc-security-limits-conf中添加用户限制信息"><a href="#4-5-在-etc-security-limits-conf中添加用户限制信息" class="headerlink" title="4.5 在/etc/security/limits.conf中添加用户限制信息"></a>4.5 在/etc/security/limits.conf中添加用户限制信息</h3><p>vi /etc/security/limits.conf</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">oracle soft nproc 2047</span><br><span class="line">oracle hard nproc 16384</span><br><span class="line">oracle soft nofile 1024</span><br><span class="line">oracle hard nofile 65536</span><br><span class="line">oracle hard stack 10240</span><br></pre></td></tr></table></figure>
<p>vi /etc/pam.d/login</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">session required /lib/security/pam_limits.so</span><br><span class="line">session required pam_limits.so</span><br></pre></td></tr></table></figure>
<h3 id="4-6-修改或者添加-etc-sysctl-conf中信息"><a href="#4-6-修改或者添加-etc-sysctl-conf中信息" class="headerlink" title="4.6 修改或者添加/etc/sysctl.conf中信息"></a>4.6 修改或者添加/etc/sysctl.conf中信息</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">fs.aio-max-nr = 1048576</span><br><span class="line">fs.file-max = 6815744</span><br><span class="line">kernel.shmall = 1048576</span><br><span class="line">kernel.shmmax = 536870912</span><br><span class="line">kernel.shmmni = 4096</span><br><span class="line">kernel.sem = 250 32000 100 128</span><br><span class="line">net.ipv4.ip_local_port_range = 9000 65500</span><br><span class="line">net.core.rmem_default = 262144</span><br><span class="line">net.core.rmem_max = 4194304</span><br><span class="line">net.core.wmem_default = 262144</span><br><span class="line">net.core.wmem_max = 1048586</span><br><span class="line">net.ipv4.tcp_wmem = 262144 262144 262144</span><br><span class="line">net.ipv4.tcp_rmem = 4194304 4194304 4194304</span><br></pre></td></tr></table></figure>
<h4 id="注意注释掉"><a href="#注意注释掉" class="headerlink" title="注意注释掉"></a>注意注释掉</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># Disable netfilter on bridges.</span><br><span class="line">#net.bridge.bridge-nf-call-ip6tables = 0</span><br><span class="line">#net.bridge.bridge-nf-call-iptables = 0</span><br><span class="line">#net.bridge.bridge-nf-call-arptables = 0</span><br></pre></td></tr></table></figure>
<p>—/sbin/sysctl -p（重新加载这些参数，不用重启系统）</p>
<h3 id="4-7-编辑"><a href="#4-7-编辑" class="headerlink" title="4.7 编辑"></a>4.7 编辑<figure class="highlight plain"><figcaption><span>/etc/profile```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">```</span><br><span class="line">if [ $USER = &quot;oracle&quot; ]; then</span><br><span class="line">	if [ $SHELL = &quot;/bin/ksh&quot; ];    </span><br><span class="line">		then</span><br><span class="line">  			ulimit -p 16384</span><br><span class="line">	  		ulimit -n 65536</span><br><span class="line">		else</span><br><span class="line">	  		ulimit -u 16384 -n 65536</span><br><span class="line">	fi</span><br><span class="line">fi</span><br></pre></td></tr></table></figure></h3><p>-注意空格，在用户切换时使用<figure class="highlight plain"><figcaption><span>- username```，这样才会加载后面的环境变量的配置信息（不要使用```su username```切换）</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### 4.8 配置环境变量</span><br><span class="line"></span><br><span class="line">在oracle用户下的.bash_profile文件中添加下面信息</span><br></pre></td></tr></table></figure></p>
<p>ORACLE_BASE=/opt/oracle<br>ORACLE_HOME=$ORACLE_BASE/oracle<br>ORACLE_SID=zqaccp(这里要写要安装的oracle的sid)<br>PATH=$ORACLE_HOME/bin:$PATH<br>NLS_LANG=AMERICAN_AMERICA.ZHS16GBK<br>export ORACLE_BASE ORACLE_HOME ORACLE_SID PATH NLS_LANG<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">```source ~/.bash_profile```  环境变量立即生效</span><br><span class="line">用echo命令测试环境变量设置是否正确：</span><br><span class="line">```echo $ORACLE_HOME</span><br></pre></td></tr></table></figure></p>
<hr>
<h3 id="4-9-解压缩oracle文件"><a href="#4-9-解压缩oracle文件" class="headerlink" title="4.9 解压缩oracle文件"></a>4.9 解压缩oracle文件</h3><p>使用：unzip 压缩文件名称    即可</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">unzip linux_11gR2_database_1of2.zip</span><br><span class="line">unzip linux_11gR2_database_2of2.zip</span><br></pre></td></tr></table></figure>
<p>如果是root拷贝过去的，用root解压缩，然后还要赋予oracle的权限。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chown -R oracle:oinstall /opt/oracle/database</span><br></pre></td></tr></table></figure>
<h3 id="4-10-设置编码方式：在oracle用户下："><a href="#4-10-设置编码方式：在oracle用户下：" class="headerlink" title="4.10 设置编码方式：在oracle用户下："></a>4.10 设置编码方式：在oracle用户下：</h3><figure class="highlight plain"><figcaption><span>LANG=en_US.UTF-8```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 五、安装Oracle </span><br><span class="line">### 5.1 解压Oracle安装文件	</span><br><span class="line"></span><br><span class="line">将Oracle拷贝至Linux服务器上,然后解压	</span><br><span class="line">如果使用光盘安装,则使用 mount -t iso9660 /dev/dvd /mnt/dvd 挂载光盘 </span><br><span class="line"></span><br><span class="line">### 5.2 设置安装环境	</span><br><span class="line">如果Linux系统字符编码是中文的,在安装过程中Oracle安装界面会全部乱码。可使用 ```export LANG=en_US``` ,将会话的字符集改为英文字符集,然后再安装就不会出现乱码。	另外,Oracle安装时需要图形界面的支持。</span><br><span class="line">### 5.3 开始安装Oracle</span><br></pre></td></tr></table></figure>
<pre><code>1) cd database/ 切换到安装目录,然后执行 ./runInstaller 
2)然后点击“next”,进入选择安装类型的界面
3)选择“Create and configure a database”,然后点击“next”
4)选择“Server Class”,然后点击“next”
5)选择“Single instance database installation”,然后点击“next”
6)选择“Advanced install”,然后点击“next”
7)将简体中文(Simplified Chinese),添加到语言支持,然后点击“next”
8)选择“企业版(Enterprise Edition)”,然后点击“next”
9)配置安装目录,然后点击“next”
10)配置“Oracle Inventory”,然后点击“next”
11)选择“General Purpose / Transaction Processing”,然后点击“next”
12)配置Oracle的SID,然后点击“next”
13)配置内存字符集等，默认就OK，点击“next”
14)直接使用默认,然后点击“next”
    再点击“next”
    再点击“next”
15)选择“Use the same password for all account ”配置系统用户的密码,然后点击“next” 如果密码不够复杂,Oracle会提示密码过于简单
直接“yes”(如有需要可以设置的复杂一点)
16)直接使用默认,然后点击“next”,开始检查系统环境
17)有部分没有通过,这些软件都已安装,这里选择“ignore all”,然后点击“next”,出现 Oracle安装设置信息
18)点击“Finish”,开始安装Oracle（等待30分左右……）
    稍后会出现创建数据库的界面
    数据库创建完后，弹出一个窗口,可以通过“Password Management”可以修改密码,如果不需要直接“OK”,然后弹出下面的窗 口。
    提示需要在root用户下执行两个脚本：
    oraInstRoot.sh和root.sh
    这是需要打开一个命令行,然后切换到Root用户执行这两个脚本,然后点击“OK”,回到安装 界面。
    稍候就安装成功！
点击“Close”,安装结束。
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 七、测试安装结果</span><br><span class="line"></span><br><span class="line">切换到Oracle用户 ```su - oracle``` ,然后输入 ```sqlplus / as sysdba``` 登录到Oracle数据库, 然后执行 ```desc tab``` ,如果能够打印出表结构证明Oracle已经安装并启动成功了。</span><br><span class="line"></span><br><span class="line">## 八、修改防火墙配置,将Oracle端口添加 到例外</span><br><span class="line">使用 ```vi /etc/sysconfig/iptables``` ,打开防火墙配置文件。在 ```-A INPUT -i lo -j ACCEPT ```下添加下面的内容,如果有，不需要添加，跳过此步骤</span><br><span class="line">  	-A INPUT -m state --state NEW -m tcp -p tcp --dport 22 -j ACCEPT</span><br><span class="line"></span><br><span class="line">然后使用 ```service iptables restart``` 重启防火墙使配置生效。</span><br><span class="line"></span><br><span class="line">## 九、将Oracle设置自启动</span><br><span class="line"></span><br><span class="line">使用 ```vi /etc/oratab``` 编辑oratab,进入vi编辑器后,找	到 ```orcl:/opt/oracle/oracle:N``` ,</span><br><span class="line">改	为 ```orcl:/opt/oracle/oracle:Y``` 。修改完成后,保存退出。</span><br><span class="line"></span><br><span class="line">### 然后编辑rc.local</span><br><span class="line"></span><br><span class="line"> ```vi /etc/rc.d/rc.local</span><br></pre></td></tr></table></figure>
<p> ####加入下面的内容,并保存####    </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">su oracle -lc &quot;/opt/oracle/oracle/bin/lsnrctl start&quot;</span><br><span class="line">su oracle -lc /opt/oracle/oracle/bin/dbstart</span><br></pre></td></tr></table></figure>
<p>使用 <figure class="highlight plain"><figcaption><span>重启。</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">重启完成后使用 ```lsnrctl status``` 检查监听是否启动。</span><br></pre></td></tr></table></figure></p>
<p>[oracle@oracle ~]$ lsnrctl start           //success 表明成功<br>[oracle@oracle ~]$ dbstart   //启动监听器,我自己试了一下，没启动也没有事情<br>[oracle@oracle ~]$ emctl start dbconsole<br>//自后出现啥啥啥success，代表成功 ，这个是可以启动浏览器的进行的操作<br>/**浏览器中输入<a href="https://localhost:1158/em/" target="_blank" rel="external">https://localhost:1158/em/</a> </p>
<p>```</p>
<h3 id="然后重复-七、测试安装结果-可测试数据库是否正常启动。"><a href="#然后重复-七、测试安装结果-可测试数据库是否正常启动。" class="headerlink" title="然后重复 七、测试安装结果 可测试数据库是否正常启动。"></a>然后重复 七、测试安装结果 可测试数据库是否正常启动。</h3>
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-测试" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/06/13/测试/" class="article-date">
      <time datetime="2016-06-13T06:52:30.000Z" itemprop="datePublished">2016-06-13</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/13/测试/">测试</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>我只是一个测试~ :) 哈哈 还不错哟！</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/06/12/hello-world/" class="article-date">
      <time datetime="2016-06-12T08:05:07.000Z" itemprop="datePublished">2016-06-12</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/12/hello-world/">Hello World</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-hadoop 2.7.2集群搭建 手把手教程（6台）" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/06/12/hadoop 2.7.2集群搭建 手把手教程（6台）/" class="article-date">
      <time datetime="2016-06-12T04:02:30.000Z" itemprop="datePublished">2016-06-12</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/12/hadoop 2.7.2集群搭建 手把手教程（6台）/">hadoop 2.7.2集群搭建（6台）</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h3 id="hadoop-2-x简介"><a href="#hadoop-2-x简介" class="headerlink" title="hadoop 2.x简介"></a>hadoop 2.x简介</h3><p>hadoop 2.x已经发布了稳定版本了，增加了很多特性，比如HDFS HA、YARN等。</p>
<p>注意：apache提供的hadoop-2.7.2的安装包是在32位操作系统编译的，因为hadoop依赖一些C++的本地库，<br>所以如果在64位的操作上安装hadoop-2.7.2就需要重新在64操作系统上重新编译</p>
<h3 id="前期准备"><a href="#前期准备" class="headerlink" title="前期准备"></a>前期准备</h3><h4 id="1-修改Linux主机名"><a href="#1-修改Linux主机名" class="headerlink" title="1.修改Linux主机名"></a>1.修改Linux主机名</h4><h4 id="2-修改IP"><a href="#2-修改IP" class="headerlink" title="2.修改IP"></a>2.修改IP</h4><h4 id="3-修改主机名和IP的映射关系"><a href="#3-修改主机名和IP的映射关系" class="headerlink" title="3.修改主机名和IP的映射关系"></a>3.修改主机名和IP的映射关系</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">注意:如果是租用的服务器或是使用的云主机（如华为用主机、阿里云主机等）</span><br><span class="line">/etc/hosts里面要配置的是内网IP地址和主机名的映射关系</span><br></pre></td></tr></table></figure>
<h4 id="4-关闭防火墙"><a href="#4-关闭防火墙" class="headerlink" title="4.关闭防火墙"></a>4.关闭防火墙</h4><h4 id="5-ssh免登陆"><a href="#5-ssh免登陆" class="headerlink" title="5.ssh免登陆"></a>5.ssh免登陆</h4><h4 id="6-安装JDK，配置环境变量等"><a href="#6-安装JDK，配置环境变量等" class="headerlink" title="6.安装JDK，配置环境变量等"></a>6.安装JDK，配置环境变量等</h4><h3 id="集群规划："><a href="#集群规划：" class="headerlink" title="集群规划："></a>集群规划：</h3><table>
<thead>
<tr>
<th>主机名</th>
<th style="text-align:center">IP</th>
<th style="text-align:center">安装的软件</th>
<th style="text-align:center">运行的进程</th>
</tr>
</thead>
<tbody>
<tr>
<td>yun01</td>
<td style="text-align:center">192.168.1.201</td>
<td style="text-align:center">jdk、hadoop</td>
<td style="text-align:center">NameNode、DFSZKFailoverController</td>
</tr>
<tr>
<td>yun02</td>
<td style="text-align:center">192.168.1.202</td>
<td style="text-align:center">jdk、hadoop</td>
<td style="text-align:center">NameNode、DFSZKFailoverController</td>
</tr>
<tr>
<td>yun03</td>
<td style="text-align:center">192.168.1.203</td>
<td style="text-align:center">jdk、hadoop</td>
<td style="text-align:center">ResourceManager</td>
</tr>
<tr>
<td>yun04</td>
<td style="text-align:center">192.168.1.204</td>
<td style="text-align:center">jdk、hadoop、zookeeper</td>
<td style="text-align:center">DataNode、NodeManager、JournalNode、QuorumPeerMain</td>
</tr>
<tr>
<td>yun04</td>
<td style="text-align:center">192.168.1.205</td>
<td style="text-align:center">jdk、hadoop、zookeeper</td>
<td style="text-align:center">DataNode、NodeManager、JournalNode、QuorumPeerMain</td>
</tr>
<tr>
<td>yun04</td>
<td style="text-align:center">192.168.1.206</td>
<td style="text-align:center">jdk、hadoop、zookeeper</td>
<td style="text-align:center">DataNode、NodeManager、JournalNode、QuorumPeerMain</td>
</tr>
</tbody>
</table>
<pre><code>主机名        IP            安装的软件                运行的进程
yun01    192.168.1.201    jdk、hadoop            NameNode、DFSZKFailoverController
yun02    192.168.1.202    jdk、hadoop            NameNode、DFSZKFailoverController
yun03    192.168.1.203    jdk、hadoop            ResourceManager
yun04    192.168.1.204    jdk、hadoop、zookeeper        DataNode、NodeManager、JournalNode、QuorumPeerMain
yun05    192.168.1.205    jdk、hadoop、zookeeper        DataNode、NodeManager、JournalNode、QuorumPeerMain
yun06    192.168.1.206    jdk、hadoop、zookeeper        DataNode、NodeManager、JournalNode、QuorumPeerMain
</code></pre><h4 id="说明："><a href="#说明：" class="headerlink" title="说明："></a>说明：</h4><p>在hadoop 2.x中通常由两个NameNode组成，一个处于active状态，另一个处于standby状态。Active NameNode对外提供服务，而Standby NameNode则不对外提供服务，仅同步active namenode的状态，以便能够在它失败时快速进行切换。<br>hadoop 2.x官方提供了两种HDFS HA的解决方案，一种是NFS，另一种是QJM。这里我们使用简单的QJM。在该方案中，主备NameNode之间通过一组JournalNode同步元数据信息，一条数据只要成功写入多数JournalNode即认为写入成功。通常配置奇数个JournalNode<br>这里还配置了一个zookeeper集群，用于ZKFC（DFSZKFailoverController）故障转移，当Active NameNode挂掉了，会自动切换Standby NameNode为standby状态</p>
<h3 id="安装步骤："><a href="#安装步骤：" class="headerlink" title="安装步骤："></a>安装步骤：</h3><h4 id="1-安装配置zooekeeper集群"><a href="#1-安装配置zooekeeper集群" class="headerlink" title="1.安装配置zooekeeper集群"></a>1.安装配置zooekeeper集群</h4><h5 id="1-1-解压"><a href="#1-1-解压" class="headerlink" title="1.1 解压"></a>1.1 解压</h5><figure class="highlight plain"><figcaption><span>-zxvf zookeeper-3.4.5.tar.gz -C</span><a href="/hadoop/```">link</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">##### 1.2 修改配置</span><br></pre></td></tr></table></figure>
<p>cd /hadoop/zookeeper-3.4.5/conf/<br>cp zoo_sample.cfg zoo.cfg<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">```vim zoo.cfg</span><br></pre></td></tr></table></figure></p>
<p>修改：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在最后添加：</span><br></pre></td></tr></table></figure></p>
<p>server.1=yun04:2888:3888<br>server.2=yun05:2888:3888<br>server.3=yun06:2888:3888<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">保存退出</span><br><span class="line">然后创建一个```tmp```文件夹</span><br><span class="line"></span><br><span class="line">```mkdir /hadoop/zookeeper-3.4.5/tmp</span><br></pre></td></tr></table></figure></p>
<p>再创建一个空文件<br><figure class="highlight plain"><figcaption><span>/hadoop/zookeeper-3.4.5/tmp/myid```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">最后向该文件写入ID</span><br><span class="line">```echo 1 &gt; /hadoop/zookeeper-3.4.5/tmp/myid</span><br></pre></td></tr></table></figure></p>
<h5 id="1-3-将配置好的zookeeper拷贝到其他节点-首先分别在yun05、yun06根目录下创建一个hadoop目录：mkdir-yun"><a href="#1-3-将配置好的zookeeper拷贝到其他节点-首先分别在yun05、yun06根目录下创建一个hadoop目录：mkdir-yun" class="headerlink" title="1.3 将配置好的zookeeper拷贝到其他节点(首先分别在yun05、yun06根目录下创建一个hadoop目录：mkdir /yun)"></a>1.3 将配置好的zookeeper拷贝到其他节点(首先分别在yun05、yun06根目录下创建一个hadoop目录：mkdir /yun)</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">scp -r /hadoop/zookeeper-3.4.5/ yun05:/hadoop/</span><br><span class="line">scp -r /hadoop/zookeeper-3.4.5/ yun06:/hadoop/</span><br><span class="line">```			</span><br><span class="line">注意：修改yun05、yun06对应```/hadoop/zookeeper-3.4.5/tmp/myid```内容</span><br><span class="line"></span><br><span class="line">yun05：</span><br><span class="line">	```echo 2 &gt; /hadoop/zookeeper-3.4.5/tmp/myid</span><br></pre></td></tr></table></figure>
<p>yun06：<br>    <figure class="highlight plain"><figcaption><span>3 ></span><a href="/hadoop/zookeeper-3.4.5/tmp/myid```">link</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#### 2.安装配置hadoop集群</span><br><span class="line">##### 2.1 解压</span><br><span class="line">```tar -zxvf hadoop-2.7.2.tar.gz -C /hadoop/</span><br></pre></td></tr></table></figure></p>
<h5 id="2-2-配置HDFS（hadoop2-x所有的配置文件都在-HADOOP-HOME-etc-hadoop目录下）"><a href="#2-2-配置HDFS（hadoop2-x所有的配置文件都在-HADOOP-HOME-etc-hadoop目录下）" class="headerlink" title="2.2 配置HDFS（hadoop2.x所有的配置文件都在$HADOOP_HOME/etc/hadoop目录下）"></a>2.2 配置HDFS（hadoop2.x所有的配置文件都在$HADOOP_HOME/etc/hadoop目录下）</h5><p>将hadoop添加到环境变量中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile</span><br><span class="line">export JAVA_HOME=/usr/java/jdk1.8</span><br><span class="line">export HADOOP_HOME=/hadoop/hadoop-2.7.2</span><br><span class="line">export PATH=$PATH:$JAVA_HOME/bin:$HADOOP_HOME/bin</span><br></pre></td></tr></table></figure>
<p>hadoop 2.x的配置文件全部在<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd /hadoop/hadoop-2.7.2/etc/hadoop</span><br><span class="line">			</span><br><span class="line">##### 2.2.1 修改hadoop-env.sh</span><br><span class="line">vi hadoop-env.sh</span><br></pre></td></tr></table></figure></p>
<p>export JAVA_HOME=/usr/java/jdk1.8<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">				</span><br><span class="line">##### 2.2.2 修改core-site.xml</span><br></pre></td></tr></table></figure></p>
<configuration><br>    <!-- 指定hdfs的nameservice为ns1 --><br>    <property><br>        <name>fs.defaultFS</name><br>        <value>hdfs://ns1</value><br>    </property><br>    <!-- 指定hadoop临时目录 --><br>    <property><br>        <name>hadoop.tmp.dir</name><br>        <value>/hadoop/hadoop-2.7.2/tmp</value><br>    </property><br>    <!-- 指定zookeeper地址 --><br>    <property><br>        <name>ha.zookeeper.quorum</name><br>        <value>yun04:2181,yun05:2181,yun06:2181</value><br>    </property><br></configuration>

<h5 id="2-2-3-修改hdfs-site-xml"><a href="#2-2-3-修改hdfs-site-xml" class="headerlink" title="2.2.3 修改hdfs-site.xml"></a>2.2.3 修改hdfs-site.xml</h5><p>vi hdfs-site.xml</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">&lt;configuration&gt;</span><br><span class="line">	&lt;!--指定hdfs的nameservice为ns1，需要和core-site.xml中的保持一致 --&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">			&lt;name&gt;dfs.nameservices&lt;/name&gt;</span><br><span class="line">			&lt;value&gt;ns1&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">	&lt;!-- ns1下面有两个NameNode，分别是nn1，nn2 --&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;dfs.ha.namenodes.ns1&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;nn1,nn2&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">	&lt;!-- nn1的RPC通信地址 --&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;dfs.namenode.rpc-address.ns1.nn1&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;yun01:9000&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">	&lt;!-- nn1的http通信地址 --&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;dfs.namenode.http-address.ns1.nn1&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;yun01:50070&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">	&lt;!-- nn2的RPC通信地址 --&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;dfs.namenode.rpc-address.ns1.nn2&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;yun02:9000&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">	&lt;!-- nn2的http通信地址 --&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;dfs.namenode.http-address.ns1.nn2&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;yun02:50070&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">	&lt;!-- 指定NameNode的元数据在JournalNode上的存放位置 --&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;dfs.namenode.shared.edits.dir&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;qjournal://yun04:8485;yun05:8485;yun06:8485/ns1&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">	&lt;!-- 指定JournalNode在本地磁盘存放数据的位置 --&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;dfs.journalnode.edits.dir&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;/hadoop/hadoop-2.7.2/journal&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">	&lt;!-- 开启NameNode失败自动切换 --&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;dfs.ha.automatic-failover.enabled&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;true&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">	&lt;!-- 配置失败自动切换实现方式 --&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;dfs.client.failover.proxy.provider.ns1&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">	&lt;!-- 配置隔离机制方法，多个机制用换行分割，即每个机制暂用一行--&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;dfs.ha.fencing.methods&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;</span><br><span class="line">			sshfence</span><br><span class="line">			shell(/bin/true)</span><br><span class="line">		&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">	&lt;!-- 使用sshfence隔离机制时需要ssh免登陆 --&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;dfs.ha.fencing.ssh.private-key-files&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;/root/.ssh/id_rsa&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">	&lt;!-- 配置sshfence隔离机制超时时间 --&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;dfs.ha.fencing.ssh.connect-timeout&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;30000&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>
<h4 id="2-2-4-修改mapred-site-xml"><a href="#2-2-4-修改mapred-site-xml" class="headerlink" title="2.2.4 修改mapred-site.xml"></a>2.2.4 修改mapred-site.xml</h4><p>vi mapred-site.xml</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;configuration&gt;</span><br><span class="line">	&lt;!-- 指定mr框架为yarn方式 --&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;mapreduce.framework.name&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;yarn&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">&lt;/configuration&gt;	</span><br><span class="line">```			</span><br><span class="line">#### 2.2.5 修改yarn-site.xml</span><br><span class="line">vi yarn-site.xml</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;configuration&gt;</span><br><span class="line">	&lt;!-- 指定resourcemanager地址 --&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;yarn.resourcemanager.hostname&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;yun03&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">	&lt;!-- 指定nodemanager启动时加载server的方式为shuffle server --&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;mapreduce_shuffle&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br><span class="line">			</span><br><span class="line">				</span><br><span class="line">#### 2.2.6 修改slaves(slaves是指定子节点的位置，因为要在yun01上启动HDFS、在yun03启动yarn，所以yun01上的slaves文件指定的是datanode的位置，yun03上的slaves文件指定的是nodemanager的位置)</span><br></pre></td></tr></table></figure>
<p>yun04<br>yun05<br>yun06<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">				</span><br><span class="line"></span><br><span class="line">#### 2.2.7 配置免密码登陆</span><br><span class="line"></span><br><span class="line">首先要配置yun01到yun02、yun03、yun04、yun05、yun06的免密码登陆</span><br><span class="line"></span><br><span class="line">在yun01上生产一对钥匙```ssh-keygen -t rsa```将公钥拷贝到其他节点，包括自己</span><br></pre></td></tr></table></figure></p>
<p>ssh-copy-id yun01<br>ssh-copy-id yun02<br>ssh-copy-id yun03<br>ssh-copy-id yun04<br>ssh-copy-id yun05<br>ssh-copy-id yun06<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">配置yun03到yun04、yun05、yun06的免密码登陆</span><br><span class="line"></span><br><span class="line">在yun03上生产一对钥匙```ssh-keygen -t rsa```将公钥拷贝到其他节点</span><br></pre></td></tr></table></figure></p>
<p>ssh-copy-id yun04<br>ssh-copy-id yun05<br>ssh-copy-id yun06<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">注意：两个namenode之间要配置ssh免密码登陆，别忘了配置yun02到yun01的免登陆,在yun02上生产一对钥匙```ssh-keygen -t rsa</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ssh-copy-id -i yun01				</span><br><span class="line">```		</span><br><span class="line"></span><br><span class="line">### 2.4 将配置好的hadoop拷贝到其他节点</span><br></pre></td></tr></table></figure>
<p>scp -r /hadoop/ yun02:/<br>scp -r /hadoop/ yun03:/<br>scp -r /hadoop/hadoop-2.7.2/ root@yun04:/hadoop/<br>scp -r /hadoop/hadoop-2.7.2/ root@yun05:/hadoop/<br>scp -r /hadoop/hadoop-2.7.2/ root@yun06:/hadoop/<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">##注意：严格按照下面的步骤</span><br><span class="line">### 2.5 启动zookeeper集群（分别在yun04、yun05、yun06上启动zk）</span><br><span class="line">			</span><br><span class="line">```cd /hadoop/zookeeper-3.4.5/bin/</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./zkServer.sh start</span><br></pre></td></tr></table></figure>
<p>查看状态：一个leader，两个follower<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./zkServer.sh status</span><br></pre></td></tr></table></figure></p>
<h3 id="2-6-启动journalnode（在yun01上启动所有journalnode，注意：是调用的hadoop-daemons-sh这个脚本，注意是复数s的那个脚本）"><a href="#2-6-启动journalnode（在yun01上启动所有journalnode，注意：是调用的hadoop-daemons-sh这个脚本，注意是复数s的那个脚本）" class="headerlink" title="2.6 启动journalnode（在yun01上启动所有journalnode，注意：是调用的hadoop-daemons.sh这个脚本，注意是复数s的那个脚本）"></a>2.6 启动journalnode（在yun01上启动所有journalnode，注意：是调用的hadoop-daemons.sh这个脚本，注意是复数s的那个脚本）</h3><figure class="highlight plain"><figcaption><span>/hadoop/hadoop-2.7.2```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>sbin/hadoop-daemons.sh start journalnode<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">运行jps命令检验，yun04、yun05、yun06上多了JournalNode进程</span><br><span class="line">		</span><br><span class="line">### 2.7 格式化HDFS</span><br><span class="line"></span><br><span class="line">在yun01上执行命令:```hdfs namenode -format</span><br></pre></td></tr></table></figure></p>
<p>格式化后会在根据<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">```scp -r tmp/ yun02:/hadoop/hadoop-2.7.2/</span><br></pre></td></tr></table></figure></p>
<h3 id="2-8-格式化ZK-在yun01上执行即可"><a href="#2-8-格式化ZK-在yun01上执行即可" class="headerlink" title="2.8 格式化ZK(在yun01上执行即可)"></a>2.8 格式化ZK(在yun01上执行即可)</h3><figure class="highlight plain"><figcaption><span>zkfc -formatZK```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">		</span><br><span class="line">### 2.9 启动HDFS(在yun01上执行)</span><br><span class="line">```sbin/start-dfs.sh</span><br></pre></td></tr></table></figure>
<h3 id="2-10-启动YARN"><a href="#2-10-启动YARN" class="headerlink" title="2.10 启动YARN"></a>2.10 启动YARN</h3><p>(注意：是在yun03上执行<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">```sbin/start-yarn.sh</span><br></pre></td></tr></table></figure></p>
<p>hadoop2.7.2配置完毕!!!</p>
<p>###测试集群，通过浏览器访问:</p>
<figure class="highlight plain"><figcaption><span>'yun01:9000' (active)</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">```http://192.168.1.202:50070```NameNode &apos;yun02:9000&apos; (standby)</span><br><span class="line">	</span><br><span class="line">####验证HDFS HA</span><br><span class="line">		</span><br><span class="line">首先向hdfs上传一个文件</span><br><span class="line">```hadoop fs -put /etc/profile /profile</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hadoop fs -ls /</span><br></pre></td></tr></table></figure>
<p>然后再kill掉active的NameNode <figure class="highlight plain"><figcaption><span>-9 <pid of="" nn="">```</pid></span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">通过浏览器访问：http://192.168.1.202:50070</span><br><span class="line">NameNode &apos;yun02:9000&apos; (active)</span><br><span class="line">这个时候yun02上的NameNode变成了active</span><br><span class="line">在执行命令:```hadoop fs -ls /</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-rw-r--r--   3 root supergroup       1926 2014-02-06 15:36 /profile</span><br></pre></td></tr></table></figure>
<p>刚才上传的文件依然存在！！！<br>手动启动那个挂掉的NameNode <figure class="highlight plain"><figcaption><span>start namenode```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">通过浏览器访问：http://192.168.1.201:50070</span><br><span class="line">NameNode &apos;yun01:9000&apos; (standby)</span><br><span class="line">	</span><br><span class="line">### 验证YARN：</span><br><span class="line">运行一下hadoop提供的demo中的WordCount程序：</span><br></pre></td></tr></table></figure></p>
<p>hadoop jar share/hadoop/mapreduce/hadoop-mapreduce-examples-2.7.2.jar wordcount /profile /out<br>```<br>OK，集群搭建成功，enjoy it！</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2016 原豪
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="A fast, simple &amp; powerful blog framework">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="Another simple and elegant theme for Hexo  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" >Site Visitors: 
                            <span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>, </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit">Page Hits: 
                            <span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 5;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>




<div class="scroll" id="scroll">
    <a href="#" title="Back to Top"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="Comments"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="Go to Bottom"><i class="fa fa-arrow-down"></i></a>
</div>
<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>