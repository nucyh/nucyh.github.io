<!DOCTYPE html>
<html lang="en">
<head>

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no" />
<meta name="author" content="原豪" />


    
    


<meta name="description" content="记录我的点点滴滴">
<meta property="og:type" content="website">
<meta property="og:title" content="原豪的个人博客">
<meta property="og:url" content="http://yuanhao.space/index.html">
<meta property="og:site_name" content="原豪的个人博客">
<meta property="og:description" content="记录我的点点滴滴">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="原豪的个人博客">
<meta name="twitter:description" content="记录我的点点滴滴">

<link rel="apple-touch-icon" href= "/apple-touch-icon.png">


    <link rel="alternative" href="/atom.xml" title="原豪的个人博客" type="application/atom+xml">



    <link rel="shortcut icon" href="/favicon.png">



    <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">


    <style> .article { opacity: 0;} </style>


<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>原豪的个人博客</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: true,
        isPost: false,
        isArchive: false,
        isTag: false,
        isCategory: false,
        open_in_new: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: undefined
    }
</script>


    <script> yiliaConfig.jquery_ui = [false]; </script>



    <script> yiliaConfig.rootUrl = "\/";</script>






</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/img/avatar.png" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">原豪</a></h1>
        </hgroup>

        

        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>Menu</li>
                        <li>Tags</li>
                        
                        <li>Friends</li>
                        
                        
                        <li>About Me</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                            <li><a href="/about/">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:153516796@qq.com" title="Email"></a>
                            
                                <a class="fa GitHub" target="_blank" href="#" title="GitHub"></a>
                            
                                <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="https://hexo.io">Hexo</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="https://pages.github.com/">GitHub</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://yuanhao.space/">MOxFIVE</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">专注与大数据</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">原豪</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/img/avatar.png" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">原豪</a></h1>
            </hgroup>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:153516796@qq.com" title="Email"></a>
                            
                                <a class="fa GitHub" target="_blank" href="#" title="GitHub"></a>
                            
                                <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="Tags" friends="Friends" about="About Me"/>
</nav>
      <div class="body-wrap">
  
    <article id="post-心得" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/06/20/心得/" class="article-date">
      <time datetime="2016-06-20T05:47:32.000Z" itemprop="datePublished">2016-06-20</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/20/心得/">我的生活</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>记录我的生活…</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-计算机基础及Linux入门" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/06/18/计算机基础及Linux入门/" class="article-date">
      <time datetime="2016-06-18T13:42:01.000Z" itemprop="datePublished">2016-06-18</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/18/计算机基础及Linux入门/">计算机基础及linux入门</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h4 id="计算机是-电子数字计算机的简称。"><a href="#计算机是-电子数字计算机的简称。" class="headerlink" title="计算机是 电子数字计算机的简称。"></a>计算机是 电子数字计算机的简称。</h4><p>程序和数据 成为计算机软件。</p>
<p>pc服务器：1U=4.445cm</p>
<p>互联网企业都用戴尔服务器。其次 惠普、IBM</p>
<p>BIOS芯片 主板通电后各部件自检，设置，保存，一切正常后才能启动操作系统。记录了电脑最基本的信息，是软件与硬件打交道的最基础的桥梁。</p>
<p>硬盘未来是调优的关键点，硬盘的性能是决定网站的新年能的重要因素。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">磁盘和内存的优化：</span><br><span class="line">1、内存临时储存用户的数据，然后再写到disk中。（门户网站）</span><br><span class="line">     1）速度快     2）丢数据</span><br><span class="line">2、写时：用户数据写到disk中，读时：数据再读到内存中再发给用户。 （并发量不大的中小企业）</span><br><span class="line">     1）性能低     2）不丢数据</span><br></pre></td></tr></table></figure>
<h4 id="生产中的硬件应用小结"><a href="#生产中的硬件应用小结" class="headerlink" title="生产中的硬件应用小结"></a>生产中的硬件应用小结</h4><h5 id="1、PC服务器"><a href="#1、PC服务器" class="headerlink" title="1、PC服务器"></a>1、PC服务器</h5><p>互联网公司，品牌DELL，HP，IBM。</p>
<p>Dell品牌：2010年以前 1U的1850 1950，2U的2850 2950</p>
<p>2010到2014：1U的R410/420 R610/620</p>
<p>IBM： 2U的3750/3850/3950s</p>
<h6 id="2、内存"><a href="#2、内存" class="headerlink" title="2、内存"></a>2、内存</h6><p>进程：运行着的程序，进程会放在内存里。</p>
<p>程序：静态的，在磁盘里。</p>
<h5 id="企业案例："><a href="#企业案例：" class="headerlink" title="企业案例："></a>企业案例：</h5><h6 id="1）、门户极端案例："><a href="#1）、门户极端案例：" class="headerlink" title="1）、门户极端案例："></a>1）、门户极端案例：</h6><p>高并发，大数据量：会把数据先写到内存，然后在定时或者定量的写到磁盘，最终还是会加载到内存。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">特点：</span><br><span class="line">a、高并发的写入性能高。</span><br><span class="line">b、可能会丢失一部分在内存中还没来得及存入磁盘的数据。</span><br></pre></td></tr></table></figure>
<h6 id="2）、中小企业案例："><a href="#2）、中小企业案例：" class="headerlink" title="2）、中小企业案例："></a>2）、中小企业案例：</h6><p>并发不是很大网站，会先把数据存放到磁盘，然后通过程序吧数据读入到内存里，再对外提供访问服务.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">由于90%的是网站都是读取为主，写入为辅，读写比例10：1，所以并发写入不是问题。</span><br><span class="line">提醒：这里的内存和硬盘，可能是多台机器组成的。</span><br></pre></td></tr></table></figure>
<h5 id="3、磁盘"><a href="#3、磁盘" class="headerlink" title="3、磁盘"></a>3、磁盘</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">磁盘接口：SAS SATA（这两个都是机械硬盘） SSD（固态硬盘）</span><br><span class="line">性能：SSD&gt;SATA&gt;SAS，</span><br><span class="line">应用：常规工作场景选SAS（转速15K）；</span><br><span class="line">          SATA（转速7.2K-1W）线下的备份；</span><br><span class="line">          高并发SSD。</span><br><span class="line">淘宝网：SATA和SSD混合起来用。</span><br></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Linux 必须掌握的30个命令" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/06/17/Linux 必须掌握的30个命令/" class="article-date">
      <time datetime="2016-06-17T00:18:26.000Z" itemprop="datePublished">2016-06-17</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/17/Linux 必须掌握的30个命令/">Linux 必须掌握的30个命令</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h6 id="ls-l-long-d-directory"><a href="#ls-l-long-d-directory" class="headerlink" title="ls -l(long)d(directory)"></a>ls -l(long)d(directory)</h6><h6 id="cd"><a href="#cd" class="headerlink" title="cd"></a>cd</h6><h6 id="mkdir"><a href="#mkdir" class="headerlink" title="mkdir"></a>mkdir</h6><h6 id="touch"><a href="#touch" class="headerlink" title="touch"></a>touch</h6><h6 id="pwd"><a href="#pwd" class="headerlink" title="pwd"></a>pwd</h6><h6 id="vi-vim"><a href="#vi-vim" class="headerlink" title="vi/vim"></a>vi/vim</h6><h6 id="cat-cat-gt-gt-o-txt-lt-lt-ddddd"><a href="#cat-cat-gt-gt-o-txt-lt-lt-ddddd" class="headerlink" title="cat     cat &gt;&gt;o.txt&lt;&lt;ddddd"></a>cat     cat &gt;&gt;o.txt&lt;&lt;ddddd</h6><pre><code>1
2
3
ddddd
</code></pre><h6 id="echo-“linux”-gt-gt-gt-o-txt-覆盖重定向-追加重定向"><a href="#echo-“linux”-gt-gt-gt-o-txt-覆盖重定向-追加重定向" class="headerlink" title="echo “linux” &gt;(&gt;&gt;) o.txt  覆盖重定向/追加重定向"></a>echo “linux” &gt;(&gt;&gt;) o.txt  覆盖重定向/追加重定向</h6><h6 id="cp-o-txt-tmp-拷贝文件"><a href="#cp-o-txt-tmp-拷贝文件" class="headerlink" title="cp o.txt /tmp/ 拷贝文件"></a>cp o.txt /tmp/ 拷贝文件</h6><h6 id="cp-a-etc-tmp-拷贝目录"><a href="#cp-a-etc-tmp-拷贝目录" class="headerlink" title="cp -a /etc/ /tmp/ 拷贝目录"></a>cp -a /etc/ /tmp/ 拷贝目录</h6><h6 id="mv-data-root-拷贝data目录到root目录下"><a href="#mv-data-root-拷贝data目录到root目录下" class="headerlink" title="mv /data /root/ 拷贝data目录到root目录下"></a>mv /data /root/ 拷贝data目录到root目录下</h6><h6 id="rm-o-txt"><a href="#rm-o-txt" class="headerlink" title="rm o.txt"></a>rm o.txt</h6><h6 id="rmdir-data-或者是-rm-fr-data"><a href="#rmdir-data-或者是-rm-fr-data" class="headerlink" title="rmdir data 或者是 rm -fr data"></a>rmdir data 或者是 rm -fr data</h6><h6 id="head"><a href="#head" class="headerlink" title="head"></a>head</h6><h6 id="tail"><a href="#tail" class="headerlink" title="tail"></a>tail</h6><h6 id="grep-核心命令之一（三剑客的老三）"><a href="#grep-核心命令之一（三剑客的老三）" class="headerlink" title="grep 核心命令之一（三剑客的老三）"></a>grep 核心命令之一（三剑客的老三）</h6><h6 id="sed（三剑客的老二）"><a href="#sed（三剑客的老二）" class="headerlink" title="sed（三剑客的老二）"></a>sed（三剑客的老二）</h6><h6 id="awk（三剑客的老大）"><a href="#awk（三剑客的老大）" class="headerlink" title="awk（三剑客的老大）"></a>awk（三剑客的老大）</h6><h6 id="tab键-非常实用的快捷键"><a href="#tab键-非常实用的快捷键" class="headerlink" title="tab键 非常实用的快捷键"></a>tab键 非常实用的快捷键</h6><h6 id="alias-别名"><a href="#alias-别名" class="headerlink" title="alias 别名"></a>alias 别名</h6><h6 id="unaries-取消别名"><a href="#unaries-取消别名" class="headerlink" title="unaries 取消别名"></a>unaries 取消别名</h6><h6 id="which-查看命令的路径"><a href="#which-查看命令的路径" class="headerlink" title="which 查看命令的路径"></a>which 查看命令的路径</h6><h6 id="find-type-f-name-“cat”-查找从-目录下文件类型且名字为cat"><a href="#find-type-f-name-“cat”-查找从-目录下文件类型且名字为cat" class="headerlink" title="find / -type f -name “cat” 查找从/目录下文件类型且名字为cat"></a>find / -type f -name “cat” 查找从/目录下文件类型且名字为cat</h6><h6 id="find-type-f-name-“test-txt”"><a href="#find-type-f-name-“test-txt”" class="headerlink" title="find / -type f -name “test.txt”"></a>find / -type f -name “test.txt”</h6><h6 id="find-type-f-name-“test-txt”-xargs-rm-f"><a href="#find-type-f-name-“test-txt”-xargs-rm-f" class="headerlink" title="find / -type f -name “test.txt”|xargs rm -f"></a>find / -type f -name “test.txt”|xargs rm -f</h6><h6 id="find-root-type-f-mtime-5（-5-5天前）-查找root下五天以内修改过的文件"><a href="#find-root-type-f-mtime-5（-5-5天前）-查找root下五天以内修改过的文件" class="headerlink" title="find /root/ -type f -mtime -5（+5 5天前） 查找root下五天以内修改过的文件"></a>find /root/ -type f -mtime -5（+5 5天前） 查找root下五天以内修改过的文件</h6><h6 id="find-root-type-f-mtime-5-xargs-rm-f删除过期数据"><a href="#find-root-type-f-mtime-5-xargs-rm-f删除过期数据" class="headerlink" title="find /root/ -type f -mtime -5|xargs rm -f删除过期数据"></a>find /root/ -type f -mtime -5|xargs rm -f删除过期数据</h6><h6 id="seq-6-打印出一个序列"><a href="#seq-6-打印出一个序列" class="headerlink" title="seq 6          打印出一个序列"></a>seq 6          打印出一个序列</h6><h6 id="seq-s-“-“-5-横向打印"><a href="#seq-s-“-“-5-横向打印" class="headerlink" title="seq -s “ “ 5  横向打印"></a>seq -s “ “ 5  横向打印</h6><pre><code>seq  2 5                打印出2到5
seq 1 2 9                1到9每次相差2
seq 1 5|tac                倒序
set nu                    显示行号
sed -n 20,30p err.txt
</code></pre><h6 id="head-30-ett-txt-tail-11-打印20到30行"><a href="#head-30-ett-txt-tail-11-打印20到30行" class="headerlink" title="head -30 ett.txt|tail -11     打印20到30行"></a>head -30 ett.txt|tail -11     打印20到30行</h6>
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-hadoop生态" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/06/16/hadoop生态/" class="article-date">
      <time datetime="2016-06-16T07:45:16.000Z" itemprop="datePublished">2016-06-16</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/16/hadoop生态/">hadoop 生态</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>稍后发布。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Linux 下oracle的安装" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/06/14/Linux 下oracle的安装/" class="article-date">
      <time datetime="2016-06-14T06:05:34.000Z" itemprop="datePublished">2016-06-14</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/14/Linux 下oracle的安装/">Linux 下oracle的安装</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="关闭防火墙"><a href="#关闭防火墙" class="headerlink" title="关闭防火墙"></a>关闭防火墙</h2><h3 id="怎样查看iptables和SElinux状态："><a href="#怎样查看iptables和SElinux状态：" class="headerlink" title="怎样查看iptables和SElinux状态："></a>怎样查看iptables和SElinux状态：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">service iptables status</span><br><span class="line">getenforce</span><br></pre></td></tr></table></figure>
<h3 id="关闭iptables和SElinux："><a href="#关闭iptables和SElinux：" class="headerlink" title="关闭iptables和SElinux："></a>关闭iptables和SElinux：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">service iptables stop   #临时关闭防火墙</span><br><span class="line">chkconfig iptables off    #永久关闭防火墙，开机不自启动，想自启动改成on</span><br><span class="line">setenforce 0    #临时关闭SElinux,临时打开SElinux状态命令：setenforce 1</span><br></pre></td></tr></table></figure>
<h3 id="永久关闭SElinux"><a href="#永久关闭SElinux" class="headerlink" title="永久关闭SElinux"></a>永久关闭SElinux</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/selinux/config,然后将SELINUX改成disabled，这样即使重启操作系统SElinux也是关闭状态。</span><br></pre></td></tr></table></figure>
<h3 id="查看SElinux状态："><a href="#查看SElinux状态：" class="headerlink" title="查看SElinux状态："></a>查看SElinux状态：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/sbin/sestatus -v</span><br></pre></td></tr></table></figure>
<h2 id="linux-CentOS-RedHat-命令行永久修改IP地址、网关、DNS"><a href="#linux-CentOS-RedHat-命令行永久修改IP地址、网关、DNS" class="headerlink" title="linux CentOS(RedHat)命令行永久修改IP地址、网关、DNS"></a>linux CentOS(RedHat)命令行永久修改IP地址、网关、DNS</h2><h3 id="设置IP"><a href="#设置IP" class="headerlink" title="设置IP"></a>设置IP</h3><p>[root@localhost etc]# vi /etc/sysconfig/network-scripts/ifcfg-eth0</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">DEVICE=eth0</span><br><span class="line">BOOTPROTO=static</span><br><span class="line">ONBOOT=yes</span><br><span class="line">HWADDR=00:16:36:66:a3:ec</span><br><span class="line">IPADDR=10.0.0.11</span><br><span class="line">NETMASK=255.255.255.0</span><br><span class="line">GATEWAY=10.0.0.1</span><br><span class="line">TYPE=Ethernet</span><br><span class="line">USERCTL=no</span><br><span class="line">IPV6INIT=no</span><br><span class="line">PEERDNS=yes</span><br><span class="line">	</span><br><span class="line">#################解释#################</span><br><span class="line"></span><br><span class="line">1.BOOTPROTO=static 就是手动设置静态IP，不需要自动获取(static/dhcp/bootp)</span><br><span class="line">2.USERCTL=no     不允许非root用户控制该设备</span><br><span class="line">3.PEERDNS=no     不修改/etc/resolv.conf(如果使用DHCP，则yes是默认选项)	</span><br><span class="line">4.TYPE=Ethernet 类型以太网	</span><br><span class="line">5.GATEWAY 网关	</span><br><span class="line">6.NETMASK 掩码	</span><br><span class="line">7.ONBOOT=yes 开机重启会自动加载	</span><br><span class="line">Red Hat中没有提供缺省的/etc/resolv.conf文件，它的内容是根据在安装时给出的选项动态创建的。</span><br></pre></td></tr></table></figure>
<h3 id="2-2-修改网关"><a href="#2-2-修改网关" class="headerlink" title="2.2 修改网关"></a>2.2 修改网关</h3><p>vim /etc/sysconfig/network</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">增加一条网关信息</span><br><span class="line">GATEWAY=192.168.1.1</span><br></pre></td></tr></table></figure>
<h3 id="2-3-修改DNS"><a href="#2-3-修改DNS" class="headerlink" title="2.3 修改DNS"></a>2.3 修改DNS</h3><p>vim /etc/resolv.conf</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">增加DNS信息即可</span><br><span class="line">nameserver 192.168.1.1</span><br></pre></td></tr></table></figure>
<h2 id="检查必要条件"><a href="#检查必要条件" class="headerlink" title="检查必要条件"></a>检查必要条件</h2><h3 id="检查内存及交换分区-Oracle要求2GB以上的内存"><a href="#检查内存及交换分区-Oracle要求2GB以上的内存" class="headerlink" title="检查内存及交换分区###Oracle要求2GB以上的内存"></a>检查内存及交换分区###Oracle要求2GB以上的内存</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">·查看内存大小	grep MemTotal /proc/meminfo 	</span><br><span class="line">·查看交换区大小	grep SwapTotal /proc/meminfo	</span><br><span class="line">·也可以使用下面的命令查看内存大小 free -m</span><br></pre></td></tr></table></figure>
<h2 id="四、系统配置"><a href="#四、系统配置" class="headerlink" title="四、系统配置"></a>四、系统配置</h2><p>系统配置说明：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">在安装光盘的iso文件中有个文件夹（package），在虚拟机中加载该iso文件后，可以在linux界面中直接打开光盘，进入该目录，然后右键-&gt;打开终端，在终端中进行安装。</span><br><span class="line">安装时，有些rpm包的版本和本文挡中的不同，可以先用“ls 包名前几个字母”然后按“tab”键，查找到该包名的完整名称，然后拷贝名称后进行安装。</span><br></pre></td></tr></table></figure>
<h3 id="4-1-检查相应的rpm包的情况-等于或者高于下面版本）"><a href="#4-1-检查相应的rpm包的情况-等于或者高于下面版本）" class="headerlink" title="4.1 检查相应的rpm包的情况(等于或者高于下面版本）"></a>4.1 检查相应的rpm包的情况(等于或者高于下面版本）</h3><p>rpm -qa | grep pagename(grep是搜索)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">binutils-2.17.50.0.6</span><br><span class="line">compat-libstdc++-33-3.2.3</span><br><span class="line">compat-libstdc++-33-3.2.3 (32 bit)</span><br><span class="line">elfutils-libelf-0.125</span><br><span class="line">elfutils-libelf-devel-0.125</span><br><span class="line">gcc-4.1.2</span><br><span class="line">gcc-c++-4.1.2</span><br><span class="line">glibc-2.5-24</span><br><span class="line">glibc-2.5-24 (32 bit)</span><br><span class="line">glibc-common-2.5</span><br><span class="line">glibc-devel-2.5</span><br><span class="line">glibc-devel-2.5 (32 bit)</span><br><span class="line">glibc-headers-2.5</span><br><span class="line">ksh-20060214</span><br><span class="line">libaio-0.3.106</span><br><span class="line">libaio-0.3.106 (32 bit)</span><br><span class="line">libaio-devel-0.3.106</span><br><span class="line">libaio-devel-0.3.106 (32 bit)</span><br><span class="line">libgcc-4.1.2</span><br><span class="line">libgcc-4.1.2 (32 bit)</span><br><span class="line">libstdc++-4.1.2</span><br><span class="line">libstdc++-4.1.2 (32 bit)</span><br><span class="line">libstdc++-devel 4.1.2</span><br><span class="line">make-3.81</span><br><span class="line">numactl-devel-0.9.8.x86_64</span><br><span class="line">sysstat-7.0.2</span><br><span class="line">unixODBC-2.2.11</span><br><span class="line">unixODBC-2.2.11 (32 bit)</span><br><span class="line">unixODBC-devel-2.2.11</span><br><span class="line">unixODBC-devel-2.2.11 (32 bit)</span><br></pre></td></tr></table></figure>
<h3 id="务必先在光盘中找到以上包名安装后，大约有1-2个包名在光盘中无法找到，请自己下载"><a href="#务必先在光盘中找到以上包名安装后，大约有1-2个包名在光盘中无法找到，请自己下载" class="headerlink" title="务必先在光盘中找到以上包名安装后，大约有1-2个包名在光盘中无法找到，请自己下载"></a>务必先在光盘中找到以上包名安装后，大约有1-2个包名在光盘中无法找到，请自己下载</h3><hr>
<p>pdksh-5.2.14-1 —这个包需要下载</p>
<p>ksh-20100621-6.el6包在安装oracle11gR2时，需要安装pdksh-5.2.14-1.i386.rpm包。安装该包时，出现了以下问题：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# rpm -Uvh pdksh-5.2.14-1.i386.rpm</span><br></pre></td></tr></table></figure>
<h3 id="添加组和用户"><a href="#添加组和用户" class="headerlink" title="添加组和用户"></a>添加组和用户</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/usr/sbin/groupadd oinstall（添加oinstall组）</span><br><span class="line">/usr/sbin/groupadd -g 502 dba（添加dba组）</span><br><span class="line">/usr/sbin/useradd -u 502 -g oinstall -G dba oracle（添加用户oracle，主组oinstall，辅助组dba）</span><br><span class="line">passwd oracle（修改oracle用户密码）这里输入：oracle 后重复，不管提示</span><br></pre></td></tr></table></figure>
<h3 id="创建文件夹并修改组和用户所属关系和相关权限-命令格式：chown-R-用户：用户组-文件夹"><a href="#创建文件夹并修改组和用户所属关系和相关权限-命令格式：chown-R-用户：用户组-文件夹" class="headerlink" title="创建文件夹并修改组和用户所属关系和相关权限(命令格式：chown -R 用户：用户组 文件夹)"></a>创建文件夹并修改组和用户所属关系和相关权限(命令格式：chown -R 用户：用户组 文件夹)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /opt/oracle(创建文件opt/oracle)</span><br><span class="line">chown -R oracle:oinstall /opt/oracle(使得/opt/oracle文件夹输入oracle用户和oinstall组)</span><br><span class="line">chmod -R 775 /opt/oracle(修改opt文件夹访问权限)—可选（最好执行下）</span><br><span class="line">mkdir -p /opt/oradata(创建文件opt/oracle)</span><br><span class="line">chown -R oracle:oinstall /opt/oracle(使得/opt/oradata文件夹输入oracle用户和oinstall组)</span><br><span class="line">chmod -R 775 /opt/oradata(修改opt文件夹访问权限)—可选（最好执行下）</span><br><span class="line">mkdir -p /opt/oraInventory</span><br><span class="line">chown -R oracle:oinstall /opt/oraInventory</span><br><span class="line">chown -R oracle /opt/oraInventory</span><br><span class="line">chmod -R 775 /opt/oraInventory</span><br></pre></td></tr></table></figure>
<h3 id="添加-etc-hosts中dns解析信息"><a href="#添加-etc-hosts中dns解析信息" class="headerlink" title="添加/etc/hosts中dns解析信息"></a>添加/etc/hosts中dns解析信息</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">192.168.1.102             oracle(自己的主机名)</span><br><span class="line">192.168.1.102             localhost</span><br></pre></td></tr></table></figure>
<h3 id="在-etc-security-limits-conf中添加用户限制信息"><a href="#在-etc-security-limits-conf中添加用户限制信息" class="headerlink" title="在/etc/security/limits.conf中添加用户限制信息"></a>在/etc/security/limits.conf中添加用户限制信息</h3><p>vi /etc/security/limits.conf 在文件末尾增加以下几行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">oracle soft nproc 2047</span><br><span class="line">oracle hard nproc 16384</span><br><span class="line">oracle soft nofile 1024</span><br><span class="line">oracle hard nofile 65536</span><br><span class="line">oracle hard stack 10240</span><br></pre></td></tr></table></figure>
<p>vi /etc/pam.d/login 在文件末尾增加以下几行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">session required /lib/security/pam_limits.so</span><br><span class="line">session required pam_limits.so</span><br></pre></td></tr></table></figure>
<h3 id="修改或者添加-etc-sysctl-conf中信息"><a href="#修改或者添加-etc-sysctl-conf中信息" class="headerlink" title="修改或者添加/etc/sysctl.conf中信息"></a>修改或者添加/etc/sysctl.conf中信息</h3><p>vi /etc/sysctl.conf 在文件末尾增加以下几行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">fs.aio-max-nr = 1048576</span><br><span class="line">fs.file-max = 6815744</span><br><span class="line">kernel.shmall = 1048576</span><br><span class="line">kernel.shmmax = 536870912</span><br><span class="line">kernel.shmmni = 4096</span><br><span class="line">kernel.sem = 250 32000 100 128</span><br><span class="line">net.ipv4.ip_local_port_range = 9000 65500</span><br><span class="line">net.core.rmem_default = 262144</span><br><span class="line">net.core.rmem_max = 4194304</span><br><span class="line">net.core.wmem_default = 262144</span><br><span class="line">net.core.wmem_max = 1048586</span><br><span class="line">net.ipv4.tcp_wmem = 262144 262144 262144</span><br><span class="line">net.ipv4.tcp_rmem = 4194304 4194304 4194304</span><br></pre></td></tr></table></figure>
<h4 id="注意注释掉以下几行"><a href="#注意注释掉以下几行" class="headerlink" title="注意注释掉以下几行"></a>注意注释掉以下几行</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># Disable netfilter on bridges.</span><br><span class="line">#net.bridge.bridge-nf-call-ip6tables = 0</span><br><span class="line">#net.bridge.bridge-nf-call-iptables = 0</span><br><span class="line">#net.bridge.bridge-nf-call-arptables = 0</span><br></pre></td></tr></table></figure>
<p>—/sbin/sysctl -p（重新加载这些参数，不用重启系统）</p>
<h3 id="编辑-etc-profile"><a href="#编辑-etc-profile" class="headerlink" title="编辑/etc/profile"></a>编辑/etc/profile</h3><p>vi /etc/profile 在文件末尾增加以下几行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">if [ $USER = &quot;oracle&quot; ]; then</span><br><span class="line">	if [ $SHELL = &quot;/bin/ksh&quot; ];    </span><br><span class="line">		then</span><br><span class="line">  			ulimit -p 16384</span><br><span class="line">	  		ulimit -n 65536</span><br><span class="line">		else</span><br><span class="line">	  		ulimit -u 16384 -n 65536</span><br><span class="line">	fi</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<p>-注意空格，在用户切换时使用<figure class="highlight plain"><figcaption><span>- username```，这样才会加载后面的环境变量的配置信息（不要使用su username切换）</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### 配置环境变量</span><br><span class="line"></span><br><span class="line">在oracle用户下的```.bash_profile```文件中添加下面信息</span><br><span class="line">vi ~/.bash_profile</span><br></pre></td></tr></table></figure></p>
<p>ORACLE_BASE=/opt/oracle<br>ORACLE_HOME=$ORACLE_BASE/oracle<br>ORACLE_SID=zqaccp(这里要写要安装的oracle的sid)<br>PATH=$ORACLE_HOME/bin:$PATH<br>NLS_LANG=AMERICAN_AMERICA.ZHS16GBK<br>export ORACLE_BASE ORACLE_HOME ORACLE_SID PATH NLS_LANG<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">```source ~/.bash_profile```  </span><br><span class="line"></span><br><span class="line">环境变量立即生效</span><br><span class="line">用echo命令测试环境变量设置是否正确：(出现ORACLE_HOME路径则正确)</span><br><span class="line"></span><br><span class="line">```echo $ORACLE_HOME</span><br></pre></td></tr></table></figure></p>
<hr>
<h3 id="解压缩oracle文件"><a href="#解压缩oracle文件" class="headerlink" title="解压缩oracle文件"></a>解压缩oracle文件</h3><p>切换到root用户</p>
<p>使用：unzip 压缩文件名称    即可</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">unzip linux_11gR2_database_1of2.zip</span><br><span class="line">unzip linux_11gR2_database_2of2.zip</span><br></pre></td></tr></table></figure>
<p>因为是root拷贝过去的，用root解压缩，所以要赋予oracle权限。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chown -R oracle:oinstall /opt/oracle/database</span><br></pre></td></tr></table></figure>
<h3 id="设置编码方式：在oracle用户下："><a href="#设置编码方式：在oracle用户下：" class="headerlink" title="设置编码方式：在oracle用户下："></a>设置编码方式：在oracle用户下：</h3><figure class="highlight plain"><figcaption><span>LANG=en_US.UTF-8```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 五、安装Oracle </span><br><span class="line">### 5.1 解压Oracle安装文件	</span><br><span class="line"></span><br><span class="line">将Oracle拷贝至Linux服务器上,然后解压	</span><br><span class="line">如果使用光盘安装,则使用 mount -t iso9660 /dev/dvd /mnt/dvd 挂载光盘 </span><br><span class="line"></span><br><span class="line">### 5.2 设置安装环境	</span><br><span class="line">如果Linux系统字符编码是中文的,在安装过程中Oracle安装界面会全部乱码。可使用 ```export LANG=en_US``` ,将会话的字符集改为英文字符集,然后再安装就不会出现乱码。	另外,Oracle安装时需要图形界面的支持。</span><br><span class="line">### 5.3 开始安装Oracle</span><br></pre></td></tr></table></figure>
<p>1) cd database/ 切换到安装目录,然后执行 ./runInstaller<br>2)然后点击“next”,进入选择安装类型的界面<br>3)选择“Create and configure a database”,然后点击“next”<br>4)选择“Server Class”,然后点击“next”<br>5)选择“Single instance database installation”,然后点击“next”<br>6)选择“Advanced install”,然后点击“next”<br>7)将简体中文(Simplified Chinese),添加到语言支持,然后点击“next”<br>8)选择“企业版(Enterprise Edition)”,然后点击“next”<br>9)配置安装目录,然后点击“next”<br>10)配置“Oracle Inventory”,然后点击“next”<br>11)选择“General Purpose / Transaction Processing”,然后点击“next”<br>12)配置Oracle的SID,然后点击“next”<br>13)配置内存字符集等，默认就OK，点击“next”<br>14)直接使用默认,然后点击“next”<br>    再点击“next”<br>    再点击“next”<br>15)选择“Use the same password for all account ”配置系统用户的密码,然后点击“next” 如果密码不够复杂,Oracle会提示密码过于简单<br>    直接“yes”(如有需要可以设置的复杂一点)<br>16)直接使用默认,然后点击“next”,开始检查系统环境<br>17)有部分没有通过,这些软件都已安装,这里选择“ignore all”,然后点击“next”,出现 Oracle安装设置信息<br>18)点击“Finish”,开始安装Oracle（等待30分左右……）<br>    稍后会出现创建数据库的界面<br>    数据库创建完后，弹出一个窗口,可以通过“Password Management”可以修改密码,如果不需要直接“OK”,然后弹出下面的窗 口。<br>    提示需要在root用户下执行两个脚本：<br>    oraInstRoot.sh和root.sh<br>    这是需要打开一个命令行,然后切换到Root用户执行这两个脚本,然后点击“OK”,回到安装 界面。<br>    稍候就安装成功！<br>点击“Close”,安装结束。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 测试安装结果</span><br><span class="line"></span><br><span class="line">切换到Oracle用户 ```su - oracle``` ,然后输入 ```sqlplus / as sysdba``` 登录到Oracle数据库, 然后执行 ```desc tab``` ,如果能够打印出表结构证明Oracle已经安装并启动成功了。</span><br><span class="line"></span><br><span class="line">## 修改防火墙配置,将Oracle端口添加 到例外</span><br><span class="line">使用 ```vi /etc/sysconfig/iptables``` ,打开防火墙配置文件。在 ```-A INPUT -i lo -j ACCEPT ```下添加下面的内容,如果有，不需要添加，跳过此步骤</span><br><span class="line">  	-A INPUT -m state --state NEW -m tcp -p tcp --dport 22 -j ACCEPT</span><br><span class="line"></span><br><span class="line">然后使用 ```service iptables restart``` 重启防火墙使配置生效。</span><br><span class="line"></span><br><span class="line">## 将Oracle设置自启动</span><br><span class="line"></span><br><span class="line">使用 ```vi /etc/oratab``` 编辑oratab,进入vi编辑器后,找	到 ```orcl:/opt/oracle/oracle:N``` ,</span><br><span class="line">改	为 ```orcl:/opt/oracle/oracle:Y``` 。修改完成后,保存退出。</span><br><span class="line"></span><br><span class="line">### 然后编辑rc.local</span><br><span class="line"></span><br><span class="line"> ```vi /etc/rc.d/rc.local</span><br></pre></td></tr></table></figure></p>
<p> ####加入下面的内容,并保存####    </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">su oracle -lc &quot;/opt/oracle/oracle/bin/lsnrctl start&quot;</span><br><span class="line">su oracle -lc /opt/oracle/oracle/bin/dbstart</span><br></pre></td></tr></table></figure>
<p>使用 <figure class="highlight plain"><figcaption><span>重启。</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">重启完成后使用 ```lsnrctl status``` 检查监听是否启动。</span><br></pre></td></tr></table></figure></p>
<p>[oracle@oracle ~]$ lsnrctl start           //success 表明成功<br>[oracle@oracle ~]$ dbstart   //启动监听器,我自己试了一下，没启动也没有事情<br>[oracle@oracle ~]$ emctl start dbconsole<br>//自后出现啥啥啥success，代表成功 ，这个是可以启动浏览器的进行的操作<br>/**浏览器中输入<a href="https://localhost:1158/em/" target="_blank" rel="external">https://localhost:1158/em/</a> </p>
<p>```</p>
<h3 id="然后重复-测试安装结果-可测试数据库是否正常启动。"><a href="#然后重复-测试安装结果-可测试数据库是否正常启动。" class="headerlink" title="然后重复 测试安装结果 可测试数据库是否正常启动。"></a>然后重复 <code>测试安装结果</code> 可测试数据库是否正常启动。</h3>
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-测试" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/06/13/测试/" class="article-date">
      <time datetime="2016-06-13T06:52:30.000Z" itemprop="datePublished">2016-06-13</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/13/测试/">测试</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>我只是一个测试~ :) 哈哈 还不错哟！</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/06/12/hello-world/" class="article-date">
      <time datetime="2016-06-12T08:05:07.000Z" itemprop="datePublished">2016-06-12</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/12/hello-world/">Hello World</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-hadoop 2.7.2集群搭建 手把手教程（6台）" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/06/12/hadoop 2.7.2集群搭建 手把手教程（6台）/" class="article-date">
      <time datetime="2016-06-12T04:02:30.000Z" itemprop="datePublished">2016-06-12</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/12/hadoop 2.7.2集群搭建 手把手教程（6台）/">hadoop 2.7.2集群搭建（6台）</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h3 id="hadoop-2-x简介"><a href="#hadoop-2-x简介" class="headerlink" title="hadoop 2.x简介"></a>hadoop 2.x简介</h3><p>hadoop 2.x已经发布了稳定版本了，增加了很多特性，比如HDFS HA、YARN等。</p>
<p>注意：apache提供的hadoop-2.7.2的安装包是在32位操作系统编译的，因为hadoop依赖一些C++的本地库，<br>所以如果在64位的操作上安装hadoop-2.7.2就需要重新在64操作系统上重新编译</p>
<h3 id="前期准备"><a href="#前期准备" class="headerlink" title="前期准备"></a>前期准备</h3><h4 id="修改Linux主机名"><a href="#修改Linux主机名" class="headerlink" title="修改Linux主机名"></a>修改Linux主机名</h4><h4 id="修改IP"><a href="#修改IP" class="headerlink" title="修改IP"></a>修改IP</h4><h4 id="修改主机名和IP的映射关系"><a href="#修改主机名和IP的映射关系" class="headerlink" title="修改主机名和IP的映射关系"></a>修改主机名和IP的映射关系</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">注意:如果是租用的服务器或是使用的云主机（如华为用主机、阿里云主机等）</span><br><span class="line">/etc/hosts里面要配置的是内网IP地址和主机名的映射关系</span><br></pre></td></tr></table></figure>
<h4 id="关闭防火墙"><a href="#关闭防火墙" class="headerlink" title="关闭防火墙"></a>关闭防火墙</h4><h4 id="ssh免登陆"><a href="#ssh免登陆" class="headerlink" title="ssh免登陆"></a>ssh免登陆</h4><h4 id="安装JDK，配置环境变量等"><a href="#安装JDK，配置环境变量等" class="headerlink" title="安装JDK，配置环境变量等"></a>安装JDK，配置环境变量等</h4><h3 id="集群规划："><a href="#集群规划：" class="headerlink" title="集群规划："></a>集群规划：</h3><table>
<thead>
<tr>
<th>主机名</th>
<th style="text-align:center">IP</th>
<th style="text-align:center">安装的软件</th>
<th style="text-align:center">运行的进程</th>
</tr>
</thead>
<tbody>
<tr>
<td>yun01</td>
<td style="text-align:center">192.168.1.201</td>
<td style="text-align:center">jdk、hadoop</td>
<td style="text-align:center">NameNode、DFSZKFailoverController</td>
</tr>
<tr>
<td>yun02</td>
<td style="text-align:center">192.168.1.202</td>
<td style="text-align:center">jdk、hadoop</td>
<td style="text-align:center">NameNode、DFSZKFailoverController</td>
</tr>
<tr>
<td>yun03</td>
<td style="text-align:center">192.168.1.203</td>
<td style="text-align:center">jdk、hadoop</td>
<td style="text-align:center">ResourceManager</td>
</tr>
<tr>
<td>yun04</td>
<td style="text-align:center">192.168.1.204</td>
<td style="text-align:center">jdk、hadoop、zookeeper</td>
<td style="text-align:center">DataNode、NodeManager、JournalNode、QuorumPeerMain</td>
</tr>
<tr>
<td>yun04</td>
<td style="text-align:center">192.168.1.205</td>
<td style="text-align:center">jdk、hadoop、zookeeper</td>
<td style="text-align:center">DataNode、NodeManager、JournalNode、QuorumPeerMain</td>
</tr>
<tr>
<td>yun04</td>
<td style="text-align:center">192.168.1.206</td>
<td style="text-align:center">jdk、hadoop、zookeeper</td>
<td style="text-align:center">DataNode、NodeManager、JournalNode、QuorumPeerMain</td>
</tr>
</tbody>
</table>
<h4 id="说明："><a href="#说明：" class="headerlink" title="说明："></a>说明：</h4><p>在hadoop 2.x中通常由两个NameNode组成，一个处于active状态，另一个处于standby状态。Active NameNode对外提供服务，而Standby NameNode则不对外提供服务，仅同步active namenode的状态，以便能够在它失败时快速进行切换。<br>hadoop 2.x官方提供了两种HDFS HA的解决方案，一种是NFS，另一种是QJM。这里我们使用简单的QJM。在该方案中，主备NameNode之间通过一组JournalNode同步元数据信息，一条数据只要成功写入多数JournalNode即认为写入成功。通常配置奇数个JournalNode<br>这里还配置了一个zookeeper集群，用于ZKFC（DFSZKFailoverController）故障转移，当Active NameNode挂掉了，会自动切换Standby NameNode为standby状态<br>​    </p>
<h3 id="安装步骤："><a href="#安装步骤：" class="headerlink" title="安装步骤："></a>安装步骤：</h3><p>安装配置zooekeeper集群</p>
<p>解压： tar -zxvf zookeeper-3.4.5.tar.gz -C /hadoop/</p>
<p>修改配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /hadoop/zookeeper-3.4.5/conf/</span><br><span class="line">cp zoo_sample.cfg zoo.cfg</span><br></pre></td></tr></table></figure>
<p>vim zoo.cfg 修改：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dataDir=/hadoop/zookeeper-3.4.5/tmp</span><br></pre></td></tr></table></figure>
<p>在最后添加：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">server.1=yun04:2888:3888</span><br><span class="line">server.2=yun05:2888:3888</span><br><span class="line">server.3=yun06:2888:3888</span><br></pre></td></tr></table></figure>
<p>保存退出<br>然后创建一个<code>tmp</code>文件夹</p>
<figure class="highlight plain"><figcaption><span>/hadoop/zookeeper-3.4.5/tmp```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">再创建一个空文件</span><br><span class="line">```touch /hadoop/zookeeper-3.4.5/tmp/myid</span><br></pre></td></tr></table></figure>
<p>最后向该文件写入ID<br><figure class="highlight plain"><figcaption><span>1 ></span><a href="/hadoop/zookeeper-3.4.5/tmp/myid```">link</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">##### 将配置好的zookeeper拷贝到其他节点(首先分别在yun05、yun06根目录下创建一个hadoop目录：mkdir /yun)</span><br></pre></td></tr></table></figure></p>
<p>scp -r /hadoop/zookeeper-3.4.5/ yun05:/hadoop/<br>scp -r /hadoop/zookeeper-3.4.5/ yun06:/hadoop/<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">注意：修改yun05、yun06对应```/hadoop/zookeeper-3.4.5/tmp/myid```内容</span><br><span class="line"></span><br><span class="line">yun05： ```echo 2 &gt; /hadoop/zookeeper-3.4.5/tmp/myid</span><br></pre></td></tr></table></figure></p>
<p>yun06： <figure class="highlight plain"><figcaption><span>3 ></span><a href="/hadoop/zookeeper-3.4.5/tmp/myid```">link</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#### 安装配置hadoop集群</span><br><span class="line">##### 解压</span><br><span class="line">```tar -zxvf hadoop-2.7.2.tar.gz -C /hadoop/</span><br></pre></td></tr></table></figure></p>
<h5 id="配置HDFS（hadoop2-x所有的配置文件都在-HADOOP-HOME-etc-hadoop目录下）"><a href="#配置HDFS（hadoop2-x所有的配置文件都在-HADOOP-HOME-etc-hadoop目录下）" class="headerlink" title="配置HDFS（hadoop2.x所有的配置文件都在$HADOOP_HOME/etc/hadoop目录下）"></a>配置HDFS（hadoop2.x所有的配置文件都在$HADOOP_HOME/etc/hadoop目录下）</h5><p>将hadoop添加到环境变量中<br>vim /etc/profile</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export JAVA_HOME=/usr/java/jdk1.8</span><br><span class="line">export HADOOP_HOME=/hadoop/hadoop-2.7.2</span><br><span class="line">export PATH=$PATH:$JAVA_HOME/bin:$HADOOP_HOME/bin</span><br></pre></td></tr></table></figure>
<p>hadoop 2.x的配置文件全部在<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">cd /hadoop/hadoop-2.7.2/etc/hadoop</span><br><span class="line">​			</span><br><span class="line">##### 修改hadoop-env.sh</span><br><span class="line">vi hadoop-env.sh</span><br><span class="line"></span><br><span class="line">export JAVA_HOME=/usr/java/jdk1.8</span><br><span class="line"></span><br><span class="line">##### 修改core-site.xml</span><br><span class="line"></span><br><span class="line">vi core-site.xml</span><br><span class="line"></span><br><span class="line">```xml</span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">	&lt;!-- 指定hdfs的nameservice为ns1 --&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;fs.defaultFS&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;hdfs://ns1&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">	&lt;!-- 指定hadoop临时目录 --&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;hadoop.tmp.dir&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;/hadoop/hadoop-2.7.2/tmp&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">	&lt;!-- 指定zookeeper地址 --&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;ha.zookeeper.quorum&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;yun04:2181,yun05:2181,yun06:2181&lt;/value&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure></p>
<h5 id="修改hdfs-site-xml"><a href="#修改hdfs-site-xml" class="headerlink" title="修改hdfs-site.xml"></a>修改hdfs-site.xml</h5><p>vi hdfs-site.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!--指定hdfs的nameservice为ns1，需要和core-site.xml中的保持一致 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.nameservices<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">value</span>&gt;</span>ns1<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- ns1下面有两个NameNode，分别是nn1，nn2 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.ha.namenodes.ns1<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">value</span>&gt;</span>nn1,nn2<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- nn1的RPC通信地址 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.rpc-address.ns1.nn1<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">value</span>&gt;</span>yun01:9000<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- nn1的http通信地址 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.http-address.ns1.nn1<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">value</span>&gt;</span>yun01:50070<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- nn2的RPC通信地址 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.rpc-address.ns1.nn2<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">value</span>&gt;</span>yun02:9000<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- nn2的http通信地址 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.http-address.ns1.nn2<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">value</span>&gt;</span>yun02:50070<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 指定NameNode的元数据在JournalNode上的存放位置 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.shared.edits.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">value</span>&gt;</span>qjournal://yun04:8485;yun05:8485;yun06:8485/ns1<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 指定JournalNode在本地磁盘存放数据的位置 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.journalnode.edits.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">value</span>&gt;</span>/hadoop/hadoop-2.7.2/journal<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 开启NameNode失败自动切换 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.ha.automatic-failover.enabled<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 配置失败自动切换实现方式 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.client.failover.proxy.provider.ns1<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">value</span>&gt;</span>org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 配置隔离机制方法，多个机制用换行分割，即每个机制暂用一行--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.ha.fencing.methods<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">value</span>&gt;</span></span><br><span class="line">			sshfence</span><br><span class="line">			shell(/bin/true)</span><br><span class="line">		<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 使用sshfence隔离机制时需要ssh免登陆 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.ha.fencing.ssh.private-key-files<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">value</span>&gt;</span>/root/.ssh/id_rsa<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 配置sshfence隔离机制超时时间 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.ha.fencing.ssh.connect-timeout<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">value</span>&gt;</span>30000<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="修改mapred-site-xml"><a href="#修改mapred-site-xml" class="headerlink" title="修改mapred-site.xml"></a>修改mapred-site.xml</h4><p>vi mapred-site.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 指定mr框架为yarn方式 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.framework.name<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">value</span>&gt;</span>yarn<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="修改yarn-site-xml"><a href="#修改yarn-site-xml" class="headerlink" title="修改yarn-site.xml"></a>修改yarn-site.xml</h4><p>vi yarn-site.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 指定resourcemanager地址 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.hostname<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">value</span>&gt;</span>yun03<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 指定nodemanager启动时加载server的方式为shuffle server --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.aux-services<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">value</span>&gt;</span>mapreduce_shuffle<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="修改slaves-slaves是指定子节点的位置，因为要在yun01上启动HDFS、在yun03启动yarn，所以yun01上的slaves文件指定的是datanode的位置，yun03上的slaves文件指定的是nodemanager的位置"><a href="#修改slaves-slaves是指定子节点的位置，因为要在yun01上启动HDFS、在yun03启动yarn，所以yun01上的slaves文件指定的是datanode的位置，yun03上的slaves文件指定的是nodemanager的位置" class="headerlink" title="修改slaves(slaves是指定子节点的位置，因为要在yun01上启动HDFS、在yun03启动yarn，所以yun01上的slaves文件指定的是datanode的位置，yun03上的slaves文件指定的是nodemanager的位置)"></a>修改slaves(slaves是指定子节点的位置，因为要在yun01上启动HDFS、在yun03启动yarn，所以yun01上的slaves文件指定的是datanode的位置，yun03上的slaves文件指定的是nodemanager的位置)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yun04</span><br><span class="line">yun05</span><br><span class="line">yun06</span><br></pre></td></tr></table></figure>
<h4 id="配置免密码登陆"><a href="#配置免密码登陆" class="headerlink" title="配置免密码登陆"></a>配置免密码登陆</h4><p>首先要配置yun01到yun02、yun03、yun04、yun05、yun06的免密码登陆</p>
<p>在yun01上生产一对钥匙<figure class="highlight plain"><figcaption><span>-t rsa```将公钥拷贝到其他节点，包括自己</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<p>ssh-copy-id yun01<br>ssh-copy-id yun02<br>ssh-copy-id yun03<br>ssh-copy-id yun04<br>ssh-copy-id yun05<br>ssh-copy-id yun06<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">配置yun03到yun04、yun05、yun06的免密码登陆</span><br><span class="line"></span><br><span class="line">在yun03上生产一对钥匙```ssh-keygen -t rsa```将公钥拷贝到其他节点</span><br></pre></td></tr></table></figure></p>
<p>ssh-copy-id yun04<br>ssh-copy-id yun05<br>ssh-copy-id yun06<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">注意：两个namenode之间要配置ssh免密码登陆，别忘了配置yun02到yun01的免登陆,在yun02上生产一对钥匙```ssh-keygen -t rsa</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-copy-id -i yun01</span><br></pre></td></tr></table></figure>
<h3 id="将配置好的hadoop拷贝到其他节点"><a href="#将配置好的hadoop拷贝到其他节点" class="headerlink" title="将配置好的hadoop拷贝到其他节点"></a>将配置好的hadoop拷贝到其他节点</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">scp -r /hadoop/ yun02:/</span><br><span class="line">scp -r /hadoop/ yun03:/</span><br><span class="line">scp -r /hadoop/hadoop-2.7.2/ root@yun04:/hadoop/</span><br><span class="line">scp -r /hadoop/hadoop-2.7.2/ root@yun05:/hadoop/</span><br><span class="line">scp -r /hadoop/hadoop-2.7.2/ root@yun06:/hadoop/</span><br></pre></td></tr></table></figure>
<p>##注意：严格按照下面的步骤</p>
<h3 id="启动zookeeper集群（分别在yun04、yun05、yun06上启动zk）"><a href="#启动zookeeper集群（分别在yun04、yun05、yun06上启动zk）" class="headerlink" title="启动zookeeper集群（分别在yun04、yun05、yun06上启动zk）"></a>启动zookeeper集群（分别在yun04、yun05、yun06上启动zk）</h3><figure class="highlight plain"><figcaption><span>/hadoop/zookeeper-3.4.5/bin/```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>./zkServer.sh start<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">查看状态：一个leader，两个follower</span><br></pre></td></tr></table></figure></p>
<p>./zkServer.sh status<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### 启动journalnode（在yun01上启动所有journalnode，注意：是调用的hadoop-daemons.sh这个脚本，注意是复数s的那个脚本）</span><br><span class="line">```cd /hadoop/hadoop-2.7.2</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sbin/hadoop-daemons.sh start journalnode</span><br></pre></td></tr></table></figure>
<p>运行jps命令检验，yun04、yun05、yun06上多了JournalNode进程<br>​        </p>
<h3 id="格式化HDFS"><a href="#格式化HDFS" class="headerlink" title="格式化HDFS"></a>格式化HDFS</h3><p>在yun01上执行命令:<figure class="highlight plain"><figcaption><span>namenode -format```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">格式化后会在根据```core-site.xml```中的hadoop.tmp.dir配置生成个文件，这里我配置的是/hadoop/hadoop-2.7.2/tmp，然后将/hadoop/hadoop-2.7.2/tmp拷贝到yun02的/hadoop/hadoop-2.7.2/下。</span><br><span class="line">```scp -r tmp/ yun02:/hadoop/hadoop-2.7.2/</span><br></pre></td></tr></table></figure></p>
<p>​        </p>
<h3 id="格式化ZK-在yun01上执行即可"><a href="#格式化ZK-在yun01上执行即可" class="headerlink" title="格式化ZK(在yun01上执行即可)"></a>格式化ZK(在yun01上执行即可)</h3><figure class="highlight plain"><figcaption><span>zkfc -formatZK```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">​		</span><br><span class="line">### 启动HDFS(在yun01上执行)</span><br><span class="line">```sbin/start-dfs.sh</span><br></pre></td></tr></table></figure>
<h3 id="启动YARN"><a href="#启动YARN" class="headerlink" title="启动YARN"></a>启动YARN</h3><p>(注意：是在yun03上执行<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">```sbin/start-yarn.sh</span><br></pre></td></tr></table></figure></p>
<p>​<br>hadoop2.7.2配置完毕!!!</p>
<h3 id="测试集群，通过浏览器访问"><a href="#测试集群，通过浏览器访问" class="headerlink" title="测试集群，通过浏览器访问:"></a>测试集群，通过浏览器访问:</h3><figure class="highlight plain"><figcaption><span>NameNode 'yun01:9000' (active)</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">```http://192.168.1.202:50070``` NameNode &apos;yun02:9000&apos; (standby)</span><br><span class="line">​	</span><br><span class="line">#### 验证HDFS HA</span><br><span class="line"></span><br><span class="line">首先向hdfs上传一个文件</span><br><span class="line">```hadoop fs -put /etc/profile /profile</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hadoop fs -ls /</span><br></pre></td></tr></table></figure>
<p>然后再kill掉active的NameNode<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kill -9 &lt;pid of NN&gt;</span><br></pre></td></tr></table></figure></p>
<p>通过浏览器访问：<a href="http://192.168.1.202:50070" target="_blank" rel="external">http://192.168.1.202:50070</a> <figure class="highlight plain"><figcaption><span>'yun02:9000' (active)```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">这个时候yun02上的NameNode变成了active</span><br><span class="line">在执行命令:</span><br></pre></td></tr></table></figure></p>
<p>hadoop fs -ls /</p>
<p>-rw-r–r–   3 root supergroup       1926 2016-06-06 15:36 /profile<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">刚才上传的文件依然存在！！！</span><br><span class="line">手动启动那个挂掉的NameNode ```sbin/hadoop-daemon.sh start namenode</span><br><span class="line">通过浏览器访问：http://192.168.1.201:50070 ```NameNode &apos;yun01:9000&apos; (standby)</span><br></pre></td></tr></table></figure></p>
<p>​    </p>
<h3 id="验证YARN："><a href="#验证YARN：" class="headerlink" title="验证YARN："></a>验证YARN：</h3><p>运行一下hadoop提供的demo中的WordCount程序：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hadoop jar share/hadoop/mapreduce/hadoop-mapreduce-examples-2.7.2.jar wordcount /profile /out</span><br></pre></td></tr></table></figure>
<p>OK，集群搭建成功，enjoy it！<br>​<br>​<br>​<br>​<br>​<br>​<br>​<br>​<br>​<br>​<br>​    </p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2016 原豪
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="A fast, simple &amp; powerful blog framework">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="Another simple and elegant theme for Hexo  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" >Site Visitors: 
                            <span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>, </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit">Page Hits: 
                            <span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 5;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>




<div class="scroll" id="scroll">
    <a href="#" title="Back to Top"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="Comments"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="Go to Bottom"><i class="fa fa-arrow-down"></i></a>
</div>
<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>