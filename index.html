<!DOCTYPE html>
<html lang="en">
<head>

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no" />
<meta name="author" content="原豪" />


    
    


<meta name="description" content="记录我的点点滴滴">
<meta property="og:type" content="website">
<meta property="og:title" content="原豪的个人博客">
<meta property="og:url" content="http://yuanhao.space/index.html">
<meta property="og:site_name" content="原豪的个人博客">
<meta property="og:description" content="记录我的点点滴滴">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="原豪的个人博客">
<meta name="twitter:description" content="记录我的点点滴滴">

<link rel="apple-touch-icon" href= "/apple-touch-icon.png">


    <link rel="alternative" href="/atom.xml" title="原豪的个人博客" type="application/atom+xml">



    <link rel="shortcut icon" href="/favicon.png">



    <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">


    <style> .article { opacity: 0;} </style>


<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>原豪的个人博客</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: true,
        isPost: false,
        isArchive: false,
        isTag: false,
        isCategory: false,
        open_in_new: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: undefined
    }
</script>


    <script> yiliaConfig.jquery_ui = [false]; </script>



    <script> yiliaConfig.rootUrl = "\/";</script>






</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/img/avatar.png" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">原豪</a></h1>
        </hgroup>

        

        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>Menu</li>
                        <li>Tags</li>
                        
                        <li>Friends</li>
                        
                        
                        <li>About Me</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                            <li><a href="/about/">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:153516796@qq.com" title="Email"></a>
                            
                                <a class="fa GitHub" target="_blank" href="#" title="GitHub"></a>
                            
                                <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CentOS-7-运行级别/">CentOS 7, 运行级别</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HBase/">HBase</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hadoop-2-7-2-前期准备/">hadoop 2.7.2 前期准备</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hadoop-2-7-2-集群-7台/">hadoop 2.7.2 集群 7台</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sqoop/">sqoop</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/编译Hadoop-CentOS-7/">编译Hadoop CentOS 7</a></li></ul>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="https://hexo.io">Hexo</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="https://pages.github.com/">GitHub</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://yuanhao.space/">MOxFIVE</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">专注与大数据</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">原豪</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/img/avatar.png" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">原豪</a></h1>
            </hgroup>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:153516796@qq.com" title="Email"></a>
                            
                                <a class="fa GitHub" target="_blank" href="#" title="GitHub"></a>
                            
                                <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="Tags" friends="Friends" about="About Me"/>
</nav>
      <div class="body-wrap">
  
    <article id="post-CentOS 7 修改默认运行级别" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/06/26/CentOS 7 修改默认运行级别/" class="article-date">
      <time datetime="2016-06-26T11:50:29.000Z" itemprop="datePublished">2016-06-26</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/26/CentOS 7 修改默认运行级别/">CentOS 7 修改默认运行级别</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>在虚拟机新安装了个CentOS 7，图形界面启动太慢，想调整一下按照以前的经验改运行级别，输入：</p>
<p><strong>vi /etc/inittab</strong></p>
<p>然后发现跟CentOS 6.x不一样了，在CentOS 6.x inittab设置不再生效：</p>
<p>inittab文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># inittab is no longer used when using systemd.</span><br><span class="line">#</span><br><span class="line"># ADDING CONFIGURATION HERE WILL HAVE NO EFFECT ON YOUR SYSTEM.</span><br><span class="line">#</span><br><span class="line"># Ctrl-Alt-Delete is handled by /usr/lib/systemd/system/ctrl-alt-del.target</span><br><span class="line">#</span><br><span class="line"># systemd uses &apos;targets&apos; instead of runlevels. By default, there are two main targets:</span><br><span class="line">#</span><br><span class="line"># multi-user.target: analogous to runlevel 3</span><br><span class="line"># graphical.target: analogous to runlevel 5</span><br><span class="line">#</span><br><span class="line"># To view current default target, run:</span><br><span class="line"># systemctl get-default</span><br><span class="line">#</span><br><span class="line"># To set a default target, run:</span><br><span class="line"># systemctl set-default TARGET.target</span><br><span class="line">#</span><br></pre></td></tr></table></figure>
<p>仔细读一下上面的提示<br>multi-user.target 类似与之前的runlevel 3<br>graphical.target 类似与之前的runlevel 5</p>
<p>按照上面的提示，查看当前的默认target输入命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# systemctl get-default</span><br><span class="line">graphical.target</span><br><span class="line">[root@localhost ~]# </span><br><span class="line">当前为graphical.target</span><br></pre></td></tr></table></figure>
<p>修改为命令模式multi-user.target：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# systemctl set-default multi-user.target</span><br><span class="line">rm &apos;/etc/systemd/system/default.target&apos;</span><br><span class="line">ln -s &apos;/usr/lib/systemd/system/multi-user.target&apos; &apos;/etc/systemd/system/default.target&apos;</span><br><span class="line">[root@localhost ~]#</span><br></pre></td></tr></table></figure>
<p>查看一下当前，发现得到预期要求：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# systemctl get-default</span><br><span class="line">multi-user.target</span><br><span class="line">[root@localhost ~]#</span><br></pre></td></tr></table></figure>
<p>最后重启发现，果然是命令模式~~</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CentOS-7-运行级别/">CentOS 7, 运行级别</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-HBase集群搭建" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/06/24/HBase集群搭建/" class="article-date">
      <time datetime="2016-06-24T14:52:30.000Z" itemprop="datePublished">2016-06-24</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/24/HBase集群搭建/">HBase集群搭建</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>1.上传hbase安装包</p>
<p>2.解压</p>
<p>3.配置hbase集群，要修改3个文件（首先zk集群已经安装好了）<br>    注意：要把hadoop的hdfs-site.xml和core-site.xml 放到hbase/conf下</p>
<pre><code>3.1修改hbase-env.sh
export JAVA_HOME=/usr/java/jdk1.7.0_55
//告诉hbase使用外部的zk 
export HBASE_MANAGES_ZK=false

vim hbase-site.xml
&lt;configuration&gt;
    &lt;!-- 指定hbase在HDFS上存储的路径 --&gt;
    &lt;property&gt;
            &lt;name&gt;hbase.rootdir&lt;/name&gt;
            &lt;value&gt;hdfs://ns1/hbase&lt;/value&gt;
    &lt;/property&gt;
    &lt;!-- 指定hbase是分布式的 --&gt;
    &lt;property&gt;
            &lt;name&gt;hbase.cluster.distributed&lt;/name&gt;
            &lt;value&gt;true&lt;/value&gt;
    &lt;/property&gt;
    &lt;!-- 指定zk的地址，多个用“,”分割 --&gt;
    &lt;property&gt;
            &lt;name&gt;hbase.zookeeper.quorum&lt;/name&gt;
            &lt;value&gt;yun05:2181,yun06:2181,yun07:2181&lt;/value&gt;
    &lt;/property&gt;
&lt;/configuration&gt;

vim regionservers
yun05
yun06
yun07

3.2拷贝hbase到其他节点
    scp -r /hadoop/hbase-0.96.2-hadoop2/ yun02:/hadoop/
    scp -r /hadoop/hbase-0.96.2-hadoop2/ yun03:/hadoop/
    scp -r /hadoop/hbase-0.96.2-hadoop2/ yun04:/hadoop/
    scp -r /hadoop/hbase-0.96.2-hadoop2/ yun05:/hadoop/
    scp -r /hadoop/hbase-0.96.2-hadoop2/ yun06:/hadoop/
</code></pre><p>4.将配置好的HBase拷贝到每一个节点并同步时间。</p>
<p>5.启动所有的hbase<br>    分别启动zk<br>        ./zkServer.sh start<br>    启动hbase集群<br>        start-dfs.sh<br>    启动hbase，在主节点上运行：<br>        start-hbase.sh<br>6.通过浏览器访问hbase管理页面<br>    192.168.1.201:60010<br>7.为保证集群的可靠性，要启动多个HMaster<br>    hbase-daemon.sh start master</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HBase/">HBase</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-详解Sqoop的架构和安装部署" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/06/23/详解Sqoop的架构和安装部署/" class="article-date">
      <time datetime="2016-06-23T11:32:10.000Z" itemprop="datePublished">2016-06-23</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/23/详解Sqoop的架构和安装部署/">详解Sqoop的架构和安装部署</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="Sqoop是什么"><a href="#Sqoop是什么" class="headerlink" title="Sqoop是什么"></a>Sqoop是什么</h2><p>Sqoop 是连接传统关系型数据库和 Hadoop 的桥梁。它包括以下两个方面：<br>　　1、 将关系型数据库的数据导入到 Hadoop 及其相关的系统中，如 Hive和HBase。<br>　　2、 将数据从 Hadoop 系统里抽取并导出到关系型数据库。<br>Sqoop 的核心设计思想是利用 MapReduce 加快数据传输速度。也就是说 Sqoop 的导入和导出功能是通过 MapReduce 作业实现的。所以它是一种批处理方式进行数据传输，难以实现实时的数据进行导入和导出。</p>
<h2 id="为什么选择Sqoop"><a href="#为什么选择Sqoop" class="headerlink" title="为什么选择Sqoop"></a>为什么选择Sqoop</h2><p>我们为什么选择 Sqoop 呢？通常基于三个方面的考虑：<br>　　1、它可以高效、可控地利用资源，可以通过调整任务数来控制任务的并发度。另外它还可以配置数据库的访问时间等等。<br>　　 2、它可以自动的完成数据类型映射与转换。我们往往导入的数据是有类型的，它可以自动根据数据库中的类型转换到 Hadoop 中，当然用户也可以自定义它们之间的映射关系。<br>　　 3、它支持多种数据库，比如，<a href="http://lib.csdn.net/base/14" target="_blank" rel="external">MySQL</a>、Oracle和PostgreSQL等等数据库。</p>
<h2 id="Sqoop-架构与常用操作"><a href="#Sqoop-架构与常用操作" class="headerlink" title="Sqoop 架构与常用操作"></a>Sqoop 架构与常用操作</h2><p>Sqoop 架构是非常简单的，它主要由三个部分组成：Sqoop client、HDFS/HBase/Hive、Database。下面我们来看一下 Sqoop 的架构图。 </p>
<p><img src="http://a1.qpic.cn/psb?/V11T2YKt1pMnWZ/X0rvkMDlhn*afoHXx.l82uAAj.R5XSbz94vcx4k.nVY!/b/dK4AAAAAAAAA&amp;bo=5wLwAQAAAAADBzY!&amp;rf=viewer_4" alt=""></p>
<p>用户向 Sqoop 发起一个命令之后，这个命令会转换为一个基于 Map Task 的 MapReduce 作业。Map Task 会访问数据库的元数据信息，通过并行的 Map Task 将数据库的数据读取出来，然后导入 Hadoop 中。 当然也可以将 Hadoop 中的数据，导入传统的关系型数据库中。它的核心思想就是通过基于 Map Task （只有 map）的 MapReduce 作业，实现数据的并发拷贝和传输，这样可以大大提高效率。</p>
<h3 id="Sqoop与HDFS结合"><a href="#Sqoop与HDFS结合" class="headerlink" title="Sqoop与HDFS结合"></a>Sqoop与HDFS结合</h3><p>结合 HDFS，介绍 Sqoop 从关系型数据库的导入和导出。 </p>
<p><strong>Sqoop import</strong><br>　　它的功能是将数据从关系型数据库导入 HDFS 中，其流程图如下所示。</p>
<p><img src="http://a1.qpic.cn/psb?/V11T2YKt1pMnWZ/XxQj3oyTwIdqh25bq0d7wf7c3Ouh3bAKDesHK63SalQ!/b/dKUAAAAAAAAA&amp;bo=wAGcAQAAAAADB34!&amp;rf=viewer_4" alt=""></p>
<p>分析一下 Sqoop 数据导入流程，首先用户输入一个 Sqoop import 命令，Sqoop 会从关系型数据库中获取元数据信息，比如要操作数据库表的 schema是什么样子，这个表有哪些字段，这些字段都是什么数据类型等。它获取这些信息之后，会将输入命令转化为基于 Map 的 MapReduce作业。这样 MapReduce作业中有很多 Map 任务，每个 Map 任务从数据库中读取一片数据，这样多个 Map 任务实现并发的拷贝，把整个数据快速的拷贝到 HDFS 上。 </p>
<p>Sqoop 如何使用命令行来导入数据的，其命令行语法如下所示。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">sqoop import \</span><br><span class="line">--connect jdbc:mysql://db.haoyuan.net:3306/djtdb_hadoop \</span><br><span class="line">--username sqoop \</span><br><span class="line">--password sqoop \</span><br><span class="line">--table user \</span><br><span class="line">--target-dir /junior/sqoop/ \       //可选，不指定目录，数据默认导入到/user下</span><br><span class="line">--where &quot;sex=&apos;female&apos;&quot; \    //可选</span><br><span class="line">--as-sequencefile \     //可选，不指定格式，数据格式默认为 Text 文本格式</span><br><span class="line">--num-mappers 10 \      //可选，这个数值不宜太大</span><br><span class="line">--null-string &apos;\\N&apos; \       //可选 </span><br><span class="line">--null-non-string &apos;\\N&apos; \       //可选 </span><br><span class="line">--connect：指定 JDBC URL。</span><br><span class="line">--username/password：mysql 数据库的用户名。</span><br><span class="line">--table：要读取的数据库表。</span><br><span class="line">--target-dir：将数据导入到指定的 HDFS 目录下，文件名称如果不指定的话，会默认数据库的表名称。 </span><br><span class="line">--where：过滤从数据库中要导入的数据。</span><br><span class="line">--as-sequencefile：指定数据导入数据格式。</span><br><span class="line">--num-mappers：指定 Map 任务的并发度。</span><br><span class="line">--null-string，--null-non-string：同时使用可以将数据库中的空字段转化为&apos;\N&apos;，因为数据库中字段为 null，会占用很大的空间。</span><br></pre></td></tr></table></figure>
<p>介绍几种 Sqoop 数据导入的特殊应用。</p>
<p>1、Sqoop 每次导入数据的时候，不需要把以往的所有数据重新导入 HDFS，只需要把新增的数据导入 HDFS 即可，下面我们来看看如何导入新增数据。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">sqoop import \</span><br><span class="line">--connect jdbc:mysql://db.haoyuan.net:3306/djtdb_hadoop \</span><br><span class="line">--username sqoop \</span><br><span class="line">--password sqoop \</span><br><span class="line">--table user \</span><br><span class="line"></span><br><span class="line">####解释####</span><br><span class="line"></span><br><span class="line">--incremental append \      //代表只导入增量数据</span><br><span class="line">--check-column id \         //以主键id作为判断条件</span><br><span class="line">--last-value 999        //导入id大于999的新增数据</span><br><span class="line">上述三个组合使用，可以实现数据的增量导入。</span><br></pre></td></tr></table></figure>
<p>2、Sqoop 数据导入过程中，直接输入明码存在安全隐患，我们可以通过下面两种方式规避这种风险。 </p>
<p>2、Sqoop 数据导入过程中，直接输入明码存在安全隐患，我们可以通过下面两种方式规避这种风险。<br>　　 1)-P:sqoop 命令行最后使用 -P，此时提示用户输入密码，而且用户输入的密码是看不见的，起到安全保护作用。密码输入正确后，才会执行 sqoop 命令。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sqoop import \</span><br><span class="line">--connect jdbc:mysql://db.haoyuan.net:3306/djtdb_hadoop \</span><br><span class="line">--username sqoop \</span><br><span class="line">--table user \</span><br><span class="line">-P</span><br></pre></td></tr></table></figure>
<p>​    2)–password-file：指定一个密码保存文件，读取密码。我们可以将这个文件设置为只有自己可读的文件，防止密码泄露。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sqoop import \</span><br><span class="line">--connect jdbc:mysql://db.haoyuan.net:3306/csdb_hadoop \</span><br><span class="line">--username sqoop \</span><br><span class="line">--table user \</span><br><span class="line">--password-file my-sqoop-password</span><br></pre></td></tr></table></figure>
<p><strong>Sqoop export</strong> </p>
<p>　　 它的功能是将数据从 HDFS 导入关系型数据库表中，其流程图如下所示。 </p>
<p><img src="http://a3.qpic.cn/psb?/V11T2YKt1pMnWZ/DfkNHY8ZvkSAbOlxsygkPWJaE65Kpf9sTycKyW4nL4Y!/b/dLAAAAAAAAAA&amp;bo=2gGeAQAAAAADB2Y!&amp;rf=viewer_4" alt=""></p>
<p>​    来分析一下 Sqoop 数据导出流程，首先用户输入一个 Sqoop export 命令，它会获取关系型数据库的 schema，建立 Hadoop 字段与数据库表字段的映射关系。 然后会将输入命令转化为基于 Map 的 MapReduce作业，这样 MapReduce作业中有很多 Map 任务，它们并行的从 HDFS 读取数据，并将整个数据拷贝到数据库中。　　 </p>
<p>我们来分析一下 Sqoop 数据导出流程，首先用户输入一个 Sqoop export 命令，它会获取关系型数据库的 schema，建立 Hadoop 字段与数据库表字段的映射关系。 然后会将输入命令转化为基于 Map 的 MapReduce作业，这样 MapReduce作业中有很多 Map 任务，它们并行的从 HDFS 读取数据，并将整个数据拷贝到数据库中。　　<br>　　 下面我们看一下 Sqoop 如何使用命令行来导出数据的，其命令行语法如下所示。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">sqoop export \</span><br><span class="line">--connect jdbc:mysql://db.haoyuan.net:3306/csdb_hadoop \</span><br><span class="line">--username sqoop \</span><br><span class="line">--password sqoop \</span><br><span class="line">--table user \</span><br><span class="line">--export-dir user</span><br><span class="line"></span><br><span class="line">####解释####</span><br><span class="line"></span><br><span class="line">--connect：指定 JDBC URL。</span><br><span class="line">--username/password：mysql 数据库的用户名和密码。</span><br><span class="line">--table：要导入的数据库表。</span><br><span class="line">--export-dir：数据在 HDFS 上的存放目录。</span><br></pre></td></tr></table></figure>
<p>下面我们介绍几种 Sqoop 数据导出的特殊应用。<br>　　 1、Sqoop export 将数据导入数据库，一般情况下是一条一条导入的，这样导入的效率非常低。这时我们可以使用 Sqoop export 的批量导入提高效率，其具体语法如下。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">sqoop export \</span><br><span class="line">--Dsqoop.export.records.per.statement=10 \</span><br><span class="line">--connect jdbc:mysql://db.haoyuan.net:3306/csdb_hadoop \</span><br><span class="line">--username sqoop \</span><br><span class="line">--password sqoop \</span><br><span class="line">--table user \</span><br><span class="line">--export-dir user \</span><br><span class="line">--batch</span><br><span class="line"></span><br><span class="line">####解释####</span><br><span class="line"></span><br><span class="line">--Dsqoop.export.records.per.statement：指定每次导入10条数据，--batch：指定是批量导入。</span><br></pre></td></tr></table></figure>
<p>​     2、 在实际应用中还存在这样一个问题，比如导入数据的时候，Map Task 执行失败， 那么该 Map 任务会转移到另外一个节点执行重新运行，这时候之前导入的数据又要重新导入一份，造成数据重复导入。 因为 Map Task 没有回滚策略，一旦运行失败，已经导入数据库中的数据就无法恢复。Sqoop export 提供了一种机制能保证原子性， 使用–staging-table 选项指定临时导入的表。Sqoop export 导出数据的时候会分为两步：第一步，将数据导入数据库中的临时表，如果导入期间 Map Task 失败，会删除临时表数据重新导入；第二步，确认所有 Map Task 任务成功后，会将临时表名称为指定的表名称。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sqoop export \</span><br><span class="line">--connect jdbc:mysql://db.haoyuan.net:3306/csdb_hadoop \</span><br><span class="line">--username sqoop \</span><br><span class="line">--password sqoop \</span><br><span class="line">--table user \</span><br><span class="line">--staging-table staging_user</span><br></pre></td></tr></table></figure>
<p>3、在 Sqoop 导出数据过程中，如果我们想更新已有数据，可以采取以下两种方式。<br>　　 1)通过 –update-key id 更新已有数据。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sqoop export \</span><br><span class="line">--connect jdbc:mysql://db.haoyuan.net:3306/csdb_hadoop \</span><br><span class="line">--username sqoop \</span><br><span class="line">--password sqoop \</span><br><span class="line">--table user \</span><br><span class="line">--update-key id</span><br></pre></td></tr></table></figure>
<pre><code>2)使用 –update-key id和–update-mode allowinsert 两个选项的情况下，如果数据已经存在，则更新数据，如果数据不存在，则插入新数据记录。
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sqoop export \</span><br><span class="line">--connect jdbc:mysql://db.haoyuan.net:3306/csdb_hadoop \</span><br><span class="line">--username sqoop \</span><br><span class="line">--password sqoop \</span><br><span class="line">--table user \</span><br><span class="line">--update-key id \</span><br><span class="line">--update-mode allowinsert</span><br></pre></td></tr></table></figure>
<p>4、如果 HDFS 中的数据量比较大，很多字段并不需要，我们可以使用 –columns 来指定插入某几列数据。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sqoop export \</span><br><span class="line">--connect jdbc:mysql://db.haoyuan.net:3306/csdb_hadoop \</span><br><span class="line">--username sqoop \</span><br><span class="line">--password sqoop \</span><br><span class="line">--table user \</span><br><span class="line">--column username,sex</span><br></pre></td></tr></table></figure>
<p>5、当导入的字段数据不存在或者为null的时候，我们使用–input-null-string和–input-null-non-string 来处理。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sqoop export \</span><br><span class="line">--connect jdbc:mysql://db.haoyuan.net:3306/csdb_hadoop \</span><br><span class="line">--username sqoop \</span><br><span class="line">--password sqoop \</span><br><span class="line">--table user \</span><br><span class="line">--input-null-string &apos;\\N&apos; \</span><br><span class="line">--input-null-non-string &apos;\\N&apos;</span><br></pre></td></tr></table></figure>
<p><strong>Sqoop与其它系统结合</strong></p>
<p>Sqoop 也可以与Hive、HBase等系统结合，实现数据的导入和导出，用户需要在 sqoop-env.sh 中添加HBASE_HOME、HIVE_HOME等环境变量。</p>
<p>1、Sqoop与Hive结合比较简单，使用 –hive-import 选项就可以实现。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sqoop import \</span><br><span class="line">--connect jdbc:mysql://db.haoyuan.net:3306/csdb_hadoop \</span><br><span class="line">--username sqoop \</span><br><span class="line">--password sqoop \</span><br><span class="line">--table user \</span><br><span class="line">--hive-import</span><br></pre></td></tr></table></figure>
<p>2、Sqoop与HBase结合稍微麻烦一些，需要使用 –hbase-table 指定表名称，使用 –column-family 指定列名称。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sqoop import \</span><br><span class="line">--connect jdbc:mysql://db.haoyuan.net:3306/csdb_hadoop \</span><br><span class="line">--username sqoop \</span><br><span class="line">--password sqoop \</span><br><span class="line">--table user \</span><br><span class="line">--hbase-table user \</span><br><span class="line">--column-family city</span><br></pre></td></tr></table></figure>
<h2 id="Sqoop-的安装步骤"><a href="#Sqoop-的安装步骤" class="headerlink" title="Sqoop 的安装步骤"></a>Sqoop 的安装步骤</h2><p>​    我的Hadoop 集群安装的是 Hadoop 2.7.2 版本，所以 Sqoop 安装版本也要与之相匹配，否则后面 Sqoop 工具的使用会出现问题。这里我们选择 sqoop-1.4.6.bin__hadoop-2.0.4-alpha.tar.gz版本安装。 安装 Sqoop 很简单，分为以下几步完成。 </p>
<p>​    1、首先将下载的 sqoop-1.4.6.bin__hadoop-2.0.4-alpha.tar.gz放到 /usr/java/目录下，然后对安装包解压、修改文件名和修改用户权限。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@yun05 soft]# tar zxvf sqoop-1.4.6.bin__hadoop-1.0.0.tar.gz //解压</span><br><span class="line">[root@yun05 soft]# rm sqoop-1.4.6.bin__hadoop-1.0.0.tar.gz //删除安装包</span><br><span class="line">[root@yun05 soft]# mv sqoop-1.4.6.bin__hadoop-1.0.0 sqoop //修改安装文件目录</span><br><span class="line">[root@yun05 soft]# chown -R hadoop:hadoop sqoop //赋予sqoop hadoop用户权限</span><br></pre></td></tr></table></figure>
<p>​    2、切换到/sqoop/conf 目录下，执行以下命令。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@yun05 soft]$ cd sqoop/conf</span><br><span class="line">[root@yun05 conf]$ mv sqoop-env-template.sh sqoop-env.sh</span><br></pre></td></tr></table></figure>
<p>​    3、然后使用 vi sqoop-env.sh 命令，打开文件添加如下内容。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#Set path to where bin/hadoop is available</span><br><span class="line">export HADOOP_COMMON_HOME=/usr/java/hadoop-2.2.0-x64</span><br><span class="line">#Set path to where hadoop-*-core.jar is available</span><br><span class="line">export HADOOP_MAPRED_HOME=/usr/java/hadoop-2.2.0-x64</span><br><span class="line">#set the path to where bin/hbase is available</span><br><span class="line">#export HBASE_HOME=</span><br><span class="line">#Set the path to where bin/hive is available</span><br><span class="line">export HIVE_HOME=/usr/java/hive-1.0.0</span><br><span class="line">#Set the path for where zookeper config dir is</span><br><span class="line">#export ZOOCFGDIR=</span><br></pre></td></tr></table></figure>
<p>​    如果数据读取不涉及hbase和hive，那么相关hbase和hive的配置可以不加；如果集群有独立的zookeeper集群，那么配置zookeeper，反之，不用配置。</p>
<p>​    4、 将相关的驱动 jar 包拷贝到 sqoop/lib 目录下。安装 Hadoop2.2.0 的核心 jar包有三个需要导入：commons-cli-1.2.jar、hadoop-common-2.2.0.jar和hadoop- mapreduce-client-core-2.2.0.jar。 数据库驱动 jar 包需要导入，这里我们使用的是 mysql 数据库，所以需要导入mysql-connector-java-5.1.21.jar包。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@yun05 lib]$ cp commons-cli-1.2.jar /usr/java/sqoop/lib</span><br><span class="line">[root@yun05 common]$ cp hadoop-common-2.2.0.jar /usr/java/sqoop/lib</span><br><span class="line">[root@yun05 mapreduce]$ cp hadoop-mapreduce-client-core-2.2.0.jar /usr/java/sqoop/lib</span><br><span class="line">[root@yun05 java]$ cp mysql-connector-java-5.1.21.jar /usr/java/sqoop/lib</span><br></pre></td></tr></table></figure>
<p>5、添加环境变量。</p>
<p>vi /etc/profile</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">PATH=$PATH:$HOME/bin</span><br><span class="line">export SQOOP_HOME=/usr/java/sqoop //sqoop安装目录</span><br><span class="line">export PATH=$PATH:$SQOOP_HOME/bin</span><br></pre></td></tr></table></figure>
<p>环境添加完毕后，执行以下命令使环境生效。</p>
<p>source /etc/profile</p>
<p>6、测试运行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@yun05 config]$ sqoop list-databases \</span><br><span class="line">&gt; --connect jdbc:mysql://db.haoyuan.net:3306/djtdb_hadoop \</span><br><span class="line">&gt; --username sqoop \</span><br><span class="line">&gt; --password sqoop</span><br><span class="line">15/06/03 02:47:27 INFO sqoop.Sqoop: Running Sqoop version: 1.4.6</span><br><span class="line">15/06/03 02:47:27 WARN tool.BaseSqoopTool: Setting your password on the command-line is insecure. Consider using -P instead.</span><br><span class="line">15/06/03 02:47:28 INFO manager.MySQLManager: Preparing to use a MySQL streaming resultset.</span><br><span class="line">information_schema</span><br></pre></td></tr></table></figure>
<p>sqoop 命令执行成功，代表安装成功。</p>
<p>7、sqoop 使用</p>
<p>第一类：数据库中的数据导入到HDFS上</p>
<pre><code>sqoop import --connect jdbc:mysql://192.168.1.205:3306/db --username root --password 123  --table trade_detail --columns &apos;id, account, income, expenses&apos;
</code></pre><p>指定输出路径、指定数据分隔符</p>
<pre><code>sqoop import --connect jdbc:mysql://192.168.1.205:3306/db --username root --password 123  --table trade_detail --target-dir &apos;/sqoop/td&apos; --fields-terminated-by &apos;\t&apos;
</code></pre><p>指定Map数量 -m </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqoop import --connect jdbc:mysql://192.168.1.205:3306/db --username root --password 123  --table trade_detail --target-dir &apos;/sqoop/td1&apos; --fields-terminated-by &apos;\t&apos; -m 2</span><br></pre></td></tr></table></figure>
<p>增加where条件, 注意：条件必须用引号引起来</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqoop import --connect jdbc:mysql://192.168.1.205:3306/db --username root --password 123  --table trade_detail --where &apos;id&gt;3&apos; --target-dir &apos;/sqoop/td2&apos;</span><br></pre></td></tr></table></figure>
<p>增加query语句(使用 \ 将语句换行)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqoop import --connect jdbc:mysql://192.168.1.205:3306/db --username root --password 123 \</span><br></pre></td></tr></table></figure>
<p>​    </p>
<p>​    注意：如果使用–query这个命令的时候，需要注意的是where后面的参数，AND $CONDITIONS这个参数必须加上，而且存在单引号与双引号的区别，如果–query后面使用的是双引号，那么需要在$CONDITIONS前加上\即\$CONDITIONS</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">--query &apos;SELECT * FROM trade_detail where id &gt; 2 AND $CONDITIONS&apos; --split-by trade_detail.id --target-dir &apos;/sqoop/td3&apos;</span><br></pre></td></tr></table></figure>
<p>第二类：将HDFS上的数据导出到数据库中(不要忘记指定分隔符)</p>
<pre><code>sqoop export --connect jdbc:mysql://192.168.1.205:3306/db --username root --password 123 --export-dir &apos;/td3&apos; --table td_bak -m 1 --fields-terminated-by &apos;,&apos;
</code></pre><p>4.配置mysql远程连接<br>    GRANT ALL PRIVILEGES ON db.<em> TO ‘root’@’192.168.1.205’ IDENTIFIED BY ‘123’ WITH GRANT OPTION;<br>    FLUSH PRIVILEGES;<br>    GRANT ALL PRIVILEGES ON </em>.* TO ‘root’@’%’ IDENTIFIED BY ‘123’ WITH GRANT OPTION;</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/sqoop/">sqoop</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-hadoop 2.7.2集群搭建(前期准备)" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/06/23/hadoop 2.7.2集群搭建(前期准备)/" class="article-date">
      <time datetime="2016-06-23T03:17:15.000Z" itemprop="datePublished">2016-06-23</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/23/hadoop 2.7.2集群搭建(前期准备)/">hadoop 2.7.2集群搭建(前期准备)</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h3 id="修改Linux主机名"><a href="#修改Linux主机名" class="headerlink" title="修改Linux主机名"></a>修改Linux主机名</h3><p>修改/etc/sysconfig/network中的hostname</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/sysconfig/network</span><br><span class="line">HOSTNAME=localhost.localdomain  #修改localhost.localdomain为yun01(自己主机的名字)</span><br></pre></td></tr></table></figure>
<p>修改network的HOSTNAME项。点前面是主机名，点后面是域名。没有点就是主机名。</p>
<p>这个是永久修改，重启后生效。</p>
<p>修改/etc/hosts文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/hosts</span><br><span class="line"></span><br><span class="line">127.0.0.1    localhost.localdomain  #修改localhost.localdomain为yun01(自己主机的名字)</span><br><span class="line">shutdown -r now</span><br></pre></td></tr></table></figure>
<p>最后，重启服务器即可</p>
<h3 id="linux-CentOS命令行永久修改IP地址、网关、DNS"><a href="#linux-CentOS命令行永久修改IP地址、网关、DNS" class="headerlink" title="linux CentOS命令行永久修改IP地址、网关、DNS"></a>linux CentOS命令行永久修改IP地址、网关、DNS</h3><h4 id="设置IP"><a href="#设置IP" class="headerlink" title="设置IP"></a>设置IP</h4><p><strong>[root@localhost etc]# vi /etc/sysconfig/network-scripts/ifcfg-eth0</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">DEVICE=eth0</span><br><span class="line">BOOTPROTO=static</span><br><span class="line">ONBOOT=yes</span><br><span class="line">HWADDR=00:16:36:66:a3:ec </span><br><span class="line">IPADDR=10.0.0.11</span><br><span class="line">NETMASK=255.255.255.0</span><br><span class="line">GATEWAY=10.0.0.1</span><br><span class="line">TYPE=Ethernet</span><br><span class="line">USERCTL=no</span><br><span class="line">IPV6INIT=no</span><br><span class="line">PEERDNS=yes</span><br><span class="line"></span><br><span class="line">###########解释###########</span><br><span class="line">1.BOOTPROTO=static 就是手动设置静态IP，不需要自动获取(static/dhcp/bootp)</span><br><span class="line">2.USERCTL=no     不允许非root用户控制该设备</span><br><span class="line">3.PEERDNS=no     不修改/etc/resolv.conf(如果使用DHCP，则yes是默认选项)</span><br><span class="line">4.TYPE=Ethernet 类型以太网</span><br><span class="line">5.GATEWAY 网关</span><br><span class="line">6.NETMASK 掩码</span><br><span class="line">7.ONBOOT=yes 开机重启会自动加载</span><br><span class="line">Red Hat中没有提供缺省的/etc/resolv.conf文件，它的内容是根据在安装时给出的选项动态创建的。</span><br></pre></td></tr></table></figure>
<h4 id="修改网关"><a href="#修改网关" class="headerlink" title="修改网关"></a>修改网关</h4><p><strong>vim /etc/sysconfig/network</strong></p>
<p>增加一条网关信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GATEWAY=192.168.1.1</span><br></pre></td></tr></table></figure>
<h4 id="修改DNS"><a href="#修改DNS" class="headerlink" title="修改DNS"></a>修改DNS</h4><p><strong>vim /etc/resolv.conf</strong></p>
<p>增加DNS信息即可</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nameserver 192.168.1.1</span><br></pre></td></tr></table></figure>
<h4 id="重新加载网络配置"><a href="#重新加载网络配置" class="headerlink" title="重新加载网络配置"></a>重新加载网络配置</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/network restart</span><br></pre></td></tr></table></figure>
<h3 id="修改主机名和IP的映射关系"><a href="#修改主机名和IP的映射关系" class="headerlink" title="修改主机名和IP的映射关系"></a>修改主机名和IP的映射关系</h3><p><strong>vi /etc/hosts</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">192.168.1.201	yun01</span><br><span class="line">192.168.1.201	yun02</span><br><span class="line">192.168.1.201	yun03</span><br><span class="line">192.168.1.201	yun04</span><br><span class="line">192.168.1.201	yun05</span><br><span class="line">192.168.1.201	yun06</span><br><span class="line">192.168.1.201	yun07</span><br><span class="line">……</span><br></pre></td></tr></table></figure>
<p>你的集群要用几个主机搭建，就配置几个主机ip地址</p>
<h3 id="关闭防火墙"><a href="#关闭防火墙" class="headerlink" title="关闭防火墙"></a>关闭防火墙</h3><h4 id="查看iptables和SElinux状态："><a href="#查看iptables和SElinux状态：" class="headerlink" title="查看iptables和SElinux状态："></a>查看iptables和SElinux状态：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">service iptables status</span><br><span class="line">getenforce</span><br></pre></td></tr></table></figure>
<h4 id="关闭iptables和SElinux："><a href="#关闭iptables和SElinux：" class="headerlink" title="关闭iptables和SElinux："></a>关闭iptables和SElinux：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">service iptables stop   #临时关闭防火墙</span><br><span class="line">chkconfig iptables off    #永久关闭防火墙，开机不自启动，想自启动改成on</span><br><span class="line">setenforce 0    #临时关闭SElinux,临时打开SElinux状态命令：setenforce 1</span><br></pre></td></tr></table></figure>
<h4 id="永久关闭SElinux"><a href="#永久关闭SElinux" class="headerlink" title="永久关闭SElinux"></a>永久关闭SElinux</h4><p><strong>vim /etc/selinux/config</strong>,然后将SELINUX改成<strong>disabled</strong>，这样即使重启操作系统SElinux也是关闭状态。</p>
<h4 id="查看SElinux状态："><a href="#查看SElinux状态：" class="headerlink" title="查看SElinux状态："></a>查看SElinux状态：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/sbin/sestatus -v</span><br></pre></td></tr></table></figure>
<h3 id="配置ssh免登陆"><a href="#配置ssh免登陆" class="headerlink" title="配置ssh免登陆"></a>配置ssh免登陆</h3><p>生成ssh免登陆密钥，进入到我的home目录下的.ssh文件夹</p>
<pre><code>cd ~/.ssh
</code></pre><p>开始生成私钥和公钥</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa （然后直接敲四个回车）</span><br></pre></td></tr></table></figure>
<p>执行完这个命令后，会生成两个文件id_rsa（私钥）、id_rsa.pub（公钥）<br>将公钥拷贝到要免登陆的机器上</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-copy-id localhost(你配置的主机名或者ip地址)</span><br></pre></td></tr></table></figure>
<h3 id="安装idk，配置环境变量"><a href="#安装idk，配置环境变量" class="headerlink" title="安装idk，配置环境变量"></a>安装idk，配置环境变量</h3><p>安装JDK</p>
<p>将 <strong>jdk-8u92-linux-x64.tar.gz</strong>上传到Linux 的 <strong>/</strong> 根目录下</p>
<p>解压jdk</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#创建文件夹</span><br><span class="line">mkdir /usr/java</span><br><span class="line">#解压</span><br><span class="line">tar -zxvf jdk-8u92-linux-x64.tar.gz -C /usr/java</span><br><span class="line">#修改解压后jdk的名字</span><br><span class="line">cd /usr/java</span><br><span class="line">mv jdk-8u_92-i585/ jdk1.8</span><br></pre></td></tr></table></figure>
<p>将java添加到环境变量中</p>
<pre><code>vim /etc/profile

#在文件最后添加
export JAVA_HOME=/usr/java/jdk1.8
export PATH=$PATH:$JAVA_HOME/bin

#刷新配置
source /etc/profile
</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hadoop-2-7-2-前期准备/">hadoop 2.7.2 前期准备</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-计算机基础及Linux入门" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/06/18/计算机基础及Linux入门/" class="article-date">
      <time datetime="2016-06-18T13:42:01.000Z" itemprop="datePublished">2016-06-18</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/18/计算机基础及Linux入门/">计算机基础及linux入门</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h4 id="计算机是-电子数字计算机的简称。"><a href="#计算机是-电子数字计算机的简称。" class="headerlink" title="计算机是 电子数字计算机的简称。"></a>计算机是 电子数字计算机的简称。</h4><p>程序和数据 成为计算机软件。</p>
<p>pc服务器：1U=4.445cm</p>
<p>互联网企业都用戴尔服务器。其次 惠普、IBM</p>
<p>BIOS芯片 主板通电后各部件自检，设置，保存，一切正常后才能启动操作系统。记录了电脑最基本的信息，是软件与硬件打交道的最基础的桥梁。</p>
<p>硬盘未来是调优的关键点，硬盘的性能是决定网站的新年能的重要因素。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">磁盘和内存的优化：</span><br><span class="line">1、内存临时储存用户的数据，然后再写到disk中。（门户网站）</span><br><span class="line">     1）速度快     2）丢数据</span><br><span class="line">2、写时：用户数据写到disk中，读时：数据再读到内存中再发给用户。 （并发量不大的中小企业）</span><br><span class="line">     1）性能低     2）不丢数据</span><br></pre></td></tr></table></figure>
<h4 id="生产中的硬件应用小结"><a href="#生产中的硬件应用小结" class="headerlink" title="生产中的硬件应用小结"></a>生产中的硬件应用小结</h4><h5 id="1、PC服务器"><a href="#1、PC服务器" class="headerlink" title="1、PC服务器"></a>1、PC服务器</h5><p>互联网公司，品牌DELL，HP，IBM。</p>
<p>Dell品牌：2010年以前 1U的1850 1950，2U的2850 2950</p>
<p>2010到2014：1U的R410/420 R610/620</p>
<p>IBM： 2U的3750/3850/3950s</p>
<h6 id="2、内存"><a href="#2、内存" class="headerlink" title="2、内存"></a>2、内存</h6><p>进程：运行着的程序，进程会放在内存里。</p>
<p>程序：静态的，在磁盘里。</p>
<h5 id="企业案例："><a href="#企业案例：" class="headerlink" title="企业案例："></a>企业案例：</h5><h6 id="1）、门户极端案例："><a href="#1）、门户极端案例：" class="headerlink" title="1）、门户极端案例："></a>1）、门户极端案例：</h6><p>高并发，大数据量：会把数据先写到内存，然后在定时或者定量的写到磁盘，最终还是会加载到内存。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">特点：</span><br><span class="line">a、高并发的写入性能高。</span><br><span class="line">b、可能会丢失一部分在内存中还没来得及存入磁盘的数据。</span><br></pre></td></tr></table></figure>
<h6 id="2）、中小企业案例："><a href="#2）、中小企业案例：" class="headerlink" title="2）、中小企业案例："></a>2）、中小企业案例：</h6><p>并发不是很大网站，会先把数据存放到磁盘，然后通过程序吧数据读入到内存里，再对外提供访问服务.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">由于90%的是网站都是读取为主，写入为辅，读写比例10：1，所以并发写入不是问题。</span><br><span class="line">提醒：这里的内存和硬盘，可能是多台机器组成的。</span><br></pre></td></tr></table></figure>
<h5 id="3、磁盘"><a href="#3、磁盘" class="headerlink" title="3、磁盘"></a>3、磁盘</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">磁盘接口：SAS SATA（这两个都是机械硬盘） SSD（固态硬盘）</span><br><span class="line">性能：SSD&gt;SATA&gt;SAS，</span><br><span class="line">应用：常规工作场景选SAS（转速15K）；</span><br><span class="line">          SATA（转速7.2K-1W）线下的备份；</span><br><span class="line">          高并发SSD。</span><br><span class="line">淘宝网：SATA和SSD混合起来用。</span><br></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Linux 必须掌握的30个命令" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/06/17/Linux 必须掌握的30个命令/" class="article-date">
      <time datetime="2016-06-17T00:18:26.000Z" itemprop="datePublished">2016-06-17</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/17/Linux 必须掌握的30个命令/">Linux 必须掌握的30个命令</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h6 id="ls-l-long-d-directory"><a href="#ls-l-long-d-directory" class="headerlink" title="ls -l(long)d(directory)"></a>ls -l(long)d(directory)</h6><h6 id="cd"><a href="#cd" class="headerlink" title="cd"></a>cd</h6><h6 id="mkdir"><a href="#mkdir" class="headerlink" title="mkdir"></a>mkdir</h6><h6 id="touch"><a href="#touch" class="headerlink" title="touch"></a>touch</h6><h6 id="pwd"><a href="#pwd" class="headerlink" title="pwd"></a>pwd</h6><h6 id="vi-vim"><a href="#vi-vim" class="headerlink" title="vi/vim"></a>vi/vim</h6><h6 id="cat-cat-gt-gt-o-txt-lt-lt-ddddd"><a href="#cat-cat-gt-gt-o-txt-lt-lt-ddddd" class="headerlink" title="cat     cat &gt;&gt;o.txt&lt;&lt;ddddd"></a>cat     cat &gt;&gt;o.txt&lt;&lt;ddddd</h6><pre><code>1
2
3
ddddd
</code></pre><h6 id="echo-“linux”-gt-gt-gt-o-txt-覆盖重定向-追加重定向"><a href="#echo-“linux”-gt-gt-gt-o-txt-覆盖重定向-追加重定向" class="headerlink" title="echo “linux” &gt;(&gt;&gt;) o.txt  覆盖重定向/追加重定向"></a>echo “linux” &gt;(&gt;&gt;) o.txt  覆盖重定向/追加重定向</h6><h6 id="cp-o-txt-tmp-拷贝文件"><a href="#cp-o-txt-tmp-拷贝文件" class="headerlink" title="cp o.txt /tmp/ 拷贝文件"></a>cp o.txt /tmp/ 拷贝文件</h6><h6 id="cp-a-etc-tmp-拷贝目录"><a href="#cp-a-etc-tmp-拷贝目录" class="headerlink" title="cp -a /etc/ /tmp/ 拷贝目录"></a>cp -a /etc/ /tmp/ 拷贝目录</h6><h6 id="mv-data-root-拷贝data目录到root目录下"><a href="#mv-data-root-拷贝data目录到root目录下" class="headerlink" title="mv /data /root/ 拷贝data目录到root目录下"></a>mv /data /root/ 拷贝data目录到root目录下</h6><h6 id="rm-o-txt"><a href="#rm-o-txt" class="headerlink" title="rm o.txt"></a>rm o.txt</h6><h6 id="rmdir-data-或者是-rm-fr-data"><a href="#rmdir-data-或者是-rm-fr-data" class="headerlink" title="rmdir data 或者是 rm -fr data"></a>rmdir data 或者是 rm -fr data</h6><h6 id="head"><a href="#head" class="headerlink" title="head"></a>head</h6><h6 id="tail"><a href="#tail" class="headerlink" title="tail"></a>tail</h6><h6 id="grep-核心命令之一（三剑客的老三）"><a href="#grep-核心命令之一（三剑客的老三）" class="headerlink" title="grep 核心命令之一（三剑客的老三）"></a>grep 核心命令之一（三剑客的老三）</h6><h6 id="sed（三剑客的老二）"><a href="#sed（三剑客的老二）" class="headerlink" title="sed（三剑客的老二）"></a>sed（三剑客的老二）</h6><h6 id="awk（三剑客的老大）"><a href="#awk（三剑客的老大）" class="headerlink" title="awk（三剑客的老大）"></a>awk（三剑客的老大）</h6><h6 id="tab键-非常实用的快捷键"><a href="#tab键-非常实用的快捷键" class="headerlink" title="tab键 非常实用的快捷键"></a>tab键 非常实用的快捷键</h6><h6 id="alias-别名"><a href="#alias-别名" class="headerlink" title="alias 别名"></a>alias 别名</h6><h6 id="unaries-取消别名"><a href="#unaries-取消别名" class="headerlink" title="unaries 取消别名"></a>unaries 取消别名</h6><h6 id="which-查看命令的路径"><a href="#which-查看命令的路径" class="headerlink" title="which 查看命令的路径"></a>which 查看命令的路径</h6><h6 id="find-type-f-name-“cat”-查找从-目录下文件类型且名字为cat"><a href="#find-type-f-name-“cat”-查找从-目录下文件类型且名字为cat" class="headerlink" title="find / -type f -name “cat” 查找从/目录下文件类型且名字为cat"></a>find / -type f -name “cat” 查找从/目录下文件类型且名字为cat</h6><h6 id="find-type-f-name-“test-txt”"><a href="#find-type-f-name-“test-txt”" class="headerlink" title="find / -type f -name “test.txt”"></a>find / -type f -name “test.txt”</h6><h6 id="find-type-f-name-“test-txt”-xargs-rm-f"><a href="#find-type-f-name-“test-txt”-xargs-rm-f" class="headerlink" title="find / -type f -name “test.txt”|xargs rm -f"></a>find / -type f -name “test.txt”|xargs rm -f</h6><h6 id="find-root-type-f-mtime-5（-5-5天前）-查找root下五天以内修改过的文件"><a href="#find-root-type-f-mtime-5（-5-5天前）-查找root下五天以内修改过的文件" class="headerlink" title="find /root/ -type f -mtime -5（+5 5天前） 查找root下五天以内修改过的文件"></a>find /root/ -type f -mtime -5（+5 5天前） 查找root下五天以内修改过的文件</h6><h6 id="find-root-type-f-mtime-5-xargs-rm-f删除过期数据"><a href="#find-root-type-f-mtime-5-xargs-rm-f删除过期数据" class="headerlink" title="find /root/ -type f -mtime -5|xargs rm -f删除过期数据"></a>find /root/ -type f -mtime -5|xargs rm -f删除过期数据</h6><h6 id="seq-6-打印出一个序列"><a href="#seq-6-打印出一个序列" class="headerlink" title="seq 6          打印出一个序列"></a>seq 6          打印出一个序列</h6><h6 id="seq-s-“-“-5-横向打印"><a href="#seq-s-“-“-5-横向打印" class="headerlink" title="seq -s “ “ 5  横向打印"></a>seq -s “ “ 5  横向打印</h6><pre><code>seq  2 5                打印出2到5
seq 1 2 9                1到9每次相差2
seq 1 5|tac                倒序
set nu                    显示行号
sed -n 20,30p err.txt
</code></pre><h6 id="head-30-ett-txt-tail-11-打印20到30行"><a href="#head-30-ett-txt-tail-11-打印20到30行" class="headerlink" title="head -30 ett.txt|tail -11     打印20到30行"></a>head -30 ett.txt|tail -11     打印20到30行</h6>
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-hadoop生态" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/06/16/hadoop生态/" class="article-date">
      <time datetime="2016-06-16T07:45:16.000Z" itemprop="datePublished">2016-06-16</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/16/hadoop生态/">hadoop 生态</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>稍后发布。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Linux 下oracle的安装" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/06/14/Linux 下oracle的安装/" class="article-date">
      <time datetime="2016-06-14T06:05:34.000Z" itemprop="datePublished">2016-06-14</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/14/Linux 下oracle的安装/">Linux 下oracle的安装</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="关闭防火墙"><a href="#关闭防火墙" class="headerlink" title="关闭防火墙"></a>关闭防火墙</h2><h3 id="怎样查看iptables和SElinux状态："><a href="#怎样查看iptables和SElinux状态：" class="headerlink" title="怎样查看iptables和SElinux状态："></a>怎样查看iptables和SElinux状态：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">service iptables status</span><br><span class="line">getenforce</span><br></pre></td></tr></table></figure>
<h3 id="关闭iptables和SElinux："><a href="#关闭iptables和SElinux：" class="headerlink" title="关闭iptables和SElinux："></a>关闭iptables和SElinux：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">service iptables stop   #临时关闭防火墙</span><br><span class="line">chkconfig iptables off    #永久关闭防火墙，开机不自启动，想自启动改成on</span><br><span class="line">setenforce 0    #临时关闭SElinux,临时打开SElinux状态命令：setenforce 1</span><br></pre></td></tr></table></figure>
<h3 id="永久关闭SElinux"><a href="#永久关闭SElinux" class="headerlink" title="永久关闭SElinux"></a>永久关闭SElinux</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/selinux/config,然后将SELINUX改成disabled，这样即使重启操作系统SElinux也是关闭状态。</span><br></pre></td></tr></table></figure>
<h3 id="查看SElinux状态："><a href="#查看SElinux状态：" class="headerlink" title="查看SElinux状态："></a>查看SElinux状态：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/sbin/sestatus -v</span><br></pre></td></tr></table></figure>
<h2 id="linux-CentOS-RedHat-命令行永久修改IP地址、网关、DNS"><a href="#linux-CentOS-RedHat-命令行永久修改IP地址、网关、DNS" class="headerlink" title="linux CentOS(RedHat)命令行永久修改IP地址、网关、DNS"></a>linux CentOS(RedHat)命令行永久修改IP地址、网关、DNS</h2><h3 id="设置IP"><a href="#设置IP" class="headerlink" title="设置IP"></a>设置IP</h3><p>[root@localhost etc]# vi /etc/sysconfig/network-scripts/ifcfg-eth0</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">DEVICE=eth0</span><br><span class="line">BOOTPROTO=static</span><br><span class="line">ONBOOT=yes</span><br><span class="line">HWADDR=00:16:36:66:a3:ec</span><br><span class="line">IPADDR=10.0.0.11</span><br><span class="line">NETMASK=255.255.255.0</span><br><span class="line">GATEWAY=10.0.0.1</span><br><span class="line">TYPE=Ethernet</span><br><span class="line">USERCTL=no</span><br><span class="line">IPV6INIT=no</span><br><span class="line">PEERDNS=yes</span><br><span class="line">	</span><br><span class="line">#################解释#################</span><br><span class="line"></span><br><span class="line">1.BOOTPROTO=static 就是手动设置静态IP，不需要自动获取(static/dhcp/bootp)</span><br><span class="line">2.USERCTL=no     不允许非root用户控制该设备</span><br><span class="line">3.PEERDNS=no     不修改/etc/resolv.conf(如果使用DHCP，则yes是默认选项)	</span><br><span class="line">4.TYPE=Ethernet 类型以太网	</span><br><span class="line">5.GATEWAY 网关	</span><br><span class="line">6.NETMASK 掩码	</span><br><span class="line">7.ONBOOT=yes 开机重启会自动加载	</span><br><span class="line">Red Hat中没有提供缺省的/etc/resolv.conf文件，它的内容是根据在安装时给出的选项动态创建的。</span><br></pre></td></tr></table></figure>
<h3 id="2-2-修改网关"><a href="#2-2-修改网关" class="headerlink" title="2.2 修改网关"></a>2.2 修改网关</h3><p>vim /etc/sysconfig/network</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">增加一条网关信息</span><br><span class="line">GATEWAY=192.168.1.1</span><br></pre></td></tr></table></figure>
<h3 id="2-3-修改DNS"><a href="#2-3-修改DNS" class="headerlink" title="2.3 修改DNS"></a>2.3 修改DNS</h3><p>vim /etc/resolv.conf</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">增加DNS信息即可</span><br><span class="line">nameserver 192.168.1.1</span><br></pre></td></tr></table></figure>
<h2 id="检查必要条件"><a href="#检查必要条件" class="headerlink" title="检查必要条件"></a>检查必要条件</h2><h3 id="检查内存及交换分区-Oracle要求2GB以上的内存"><a href="#检查内存及交换分区-Oracle要求2GB以上的内存" class="headerlink" title="检查内存及交换分区###Oracle要求2GB以上的内存"></a>检查内存及交换分区###Oracle要求2GB以上的内存</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">·查看内存大小	grep MemTotal /proc/meminfo 	</span><br><span class="line">·查看交换区大小	grep SwapTotal /proc/meminfo	</span><br><span class="line">·也可以使用下面的命令查看内存大小 free -m</span><br></pre></td></tr></table></figure>
<h2 id="四、系统配置"><a href="#四、系统配置" class="headerlink" title="四、系统配置"></a>四、系统配置</h2><p>系统配置说明：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">在安装光盘的iso文件中有个文件夹（package），在虚拟机中加载该iso文件后，可以在linux界面中直接打开光盘，进入该目录，然后右键-&gt;打开终端，在终端中进行安装。</span><br><span class="line">安装时，有些rpm包的版本和本文挡中的不同，可以先用“ls 包名前几个字母”然后按“tab”键，查找到该包名的完整名称，然后拷贝名称后进行安装。</span><br></pre></td></tr></table></figure>
<h3 id="4-1-检查相应的rpm包的情况-等于或者高于下面版本）"><a href="#4-1-检查相应的rpm包的情况-等于或者高于下面版本）" class="headerlink" title="4.1 检查相应的rpm包的情况(等于或者高于下面版本）"></a>4.1 检查相应的rpm包的情况(等于或者高于下面版本）</h3><p>rpm -qa | grep pagename(grep是搜索)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">binutils-2.17.50.0.6</span><br><span class="line">compat-libstdc++-33-3.2.3</span><br><span class="line">compat-libstdc++-33-3.2.3 (32 bit)</span><br><span class="line">elfutils-libelf-0.125</span><br><span class="line">elfutils-libelf-devel-0.125</span><br><span class="line">gcc-4.1.2</span><br><span class="line">gcc-c++-4.1.2</span><br><span class="line">glibc-2.5-24</span><br><span class="line">glibc-2.5-24 (32 bit)</span><br><span class="line">glibc-common-2.5</span><br><span class="line">glibc-devel-2.5</span><br><span class="line">glibc-devel-2.5 (32 bit)</span><br><span class="line">glibc-headers-2.5</span><br><span class="line">ksh-20060214</span><br><span class="line">libaio-0.3.106</span><br><span class="line">libaio-0.3.106 (32 bit)</span><br><span class="line">libaio-devel-0.3.106</span><br><span class="line">libaio-devel-0.3.106 (32 bit)</span><br><span class="line">libgcc-4.1.2</span><br><span class="line">libgcc-4.1.2 (32 bit)</span><br><span class="line">libstdc++-4.1.2</span><br><span class="line">libstdc++-4.1.2 (32 bit)</span><br><span class="line">libstdc++-devel 4.1.2</span><br><span class="line">make-3.81</span><br><span class="line">numactl-devel-0.9.8.x86_64</span><br><span class="line">sysstat-7.0.2</span><br><span class="line">unixODBC-2.2.11</span><br><span class="line">unixODBC-2.2.11 (32 bit)</span><br><span class="line">unixODBC-devel-2.2.11</span><br><span class="line">unixODBC-devel-2.2.11 (32 bit)</span><br></pre></td></tr></table></figure>
<h3 id="务必先在光盘中找到以上包名安装后，大约有1-2个包名在光盘中无法找到，请自己下载"><a href="#务必先在光盘中找到以上包名安装后，大约有1-2个包名在光盘中无法找到，请自己下载" class="headerlink" title="务必先在光盘中找到以上包名安装后，大约有1-2个包名在光盘中无法找到，请自己下载"></a>务必先在光盘中找到以上包名安装后，大约有1-2个包名在光盘中无法找到，请自己下载</h3><hr>
<p>pdksh-5.2.14-1 —这个包需要下载</p>
<p>ksh-20100621-6.el6包在安装oracle11gR2时，需要安装pdksh-5.2.14-1.i386.rpm包。安装该包时，出现了以下问题：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# rpm -Uvh pdksh-5.2.14-1.i386.rpm</span><br></pre></td></tr></table></figure>
<h3 id="添加组和用户"><a href="#添加组和用户" class="headerlink" title="添加组和用户"></a>添加组和用户</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/usr/sbin/groupadd oinstall（添加oinstall组）</span><br><span class="line">/usr/sbin/groupadd -g 502 dba（添加dba组）</span><br><span class="line">/usr/sbin/useradd -u 502 -g oinstall -G dba oracle（添加用户oracle，主组oinstall，辅助组dba）</span><br><span class="line">passwd oracle（修改oracle用户密码）这里输入：oracle 后重复，不管提示</span><br></pre></td></tr></table></figure>
<h3 id="创建文件夹并修改组和用户所属关系和相关权限-命令格式：chown-R-用户：用户组-文件夹"><a href="#创建文件夹并修改组和用户所属关系和相关权限-命令格式：chown-R-用户：用户组-文件夹" class="headerlink" title="创建文件夹并修改组和用户所属关系和相关权限(命令格式：chown -R 用户：用户组 文件夹)"></a>创建文件夹并修改组和用户所属关系和相关权限(命令格式：chown -R 用户：用户组 文件夹)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /opt/oracle(创建文件opt/oracle)</span><br><span class="line">chown -R oracle:oinstall /opt/oracle(使得/opt/oracle文件夹输入oracle用户和oinstall组)</span><br><span class="line">chmod -R 775 /opt/oracle(修改opt文件夹访问权限)—可选（最好执行下）</span><br><span class="line">mkdir -p /opt/oradata(创建文件opt/oracle)</span><br><span class="line">chown -R oracle:oinstall /opt/oracle(使得/opt/oradata文件夹输入oracle用户和oinstall组)</span><br><span class="line">chmod -R 775 /opt/oradata(修改opt文件夹访问权限)—可选（最好执行下）</span><br><span class="line">mkdir -p /opt/oraInventory</span><br><span class="line">chown -R oracle:oinstall /opt/oraInventory</span><br><span class="line">chown -R oracle /opt/oraInventory</span><br><span class="line">chmod -R 775 /opt/oraInventory</span><br></pre></td></tr></table></figure>
<h3 id="添加-etc-hosts中dns解析信息"><a href="#添加-etc-hosts中dns解析信息" class="headerlink" title="添加/etc/hosts中dns解析信息"></a>添加/etc/hosts中dns解析信息</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">192.168.1.102             oracle(自己的主机名)</span><br><span class="line">192.168.1.102             localhost</span><br></pre></td></tr></table></figure>
<h3 id="在-etc-security-limits-conf中添加用户限制信息"><a href="#在-etc-security-limits-conf中添加用户限制信息" class="headerlink" title="在/etc/security/limits.conf中添加用户限制信息"></a>在/etc/security/limits.conf中添加用户限制信息</h3><p>vi /etc/security/limits.conf 在文件末尾增加以下几行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">oracle soft nproc 2047</span><br><span class="line">oracle hard nproc 16384</span><br><span class="line">oracle soft nofile 1024</span><br><span class="line">oracle hard nofile 65536</span><br><span class="line">oracle hard stack 10240</span><br></pre></td></tr></table></figure>
<p>vi /etc/pam.d/login 在文件末尾增加以下几行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">session required /lib/security/pam_limits.so</span><br><span class="line">session required pam_limits.so</span><br></pre></td></tr></table></figure>
<h3 id="修改或者添加-etc-sysctl-conf中信息"><a href="#修改或者添加-etc-sysctl-conf中信息" class="headerlink" title="修改或者添加/etc/sysctl.conf中信息"></a>修改或者添加/etc/sysctl.conf中信息</h3><p>vi /etc/sysctl.conf 在文件末尾增加以下几行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">fs.aio-max-nr = 1048576</span><br><span class="line">fs.file-max = 6815744</span><br><span class="line">kernel.shmall = 1048576</span><br><span class="line">kernel.shmmax = 536870912</span><br><span class="line">kernel.shmmni = 4096</span><br><span class="line">kernel.sem = 250 32000 100 128</span><br><span class="line">net.ipv4.ip_local_port_range = 9000 65500</span><br><span class="line">net.core.rmem_default = 262144</span><br><span class="line">net.core.rmem_max = 4194304</span><br><span class="line">net.core.wmem_default = 262144</span><br><span class="line">net.core.wmem_max = 1048586</span><br><span class="line">net.ipv4.tcp_wmem = 262144 262144 262144</span><br><span class="line">net.ipv4.tcp_rmem = 4194304 4194304 4194304</span><br></pre></td></tr></table></figure>
<h4 id="注意注释掉以下几行"><a href="#注意注释掉以下几行" class="headerlink" title="注意注释掉以下几行"></a>注意注释掉以下几行</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># Disable netfilter on bridges.</span><br><span class="line">#net.bridge.bridge-nf-call-ip6tables = 0</span><br><span class="line">#net.bridge.bridge-nf-call-iptables = 0</span><br><span class="line">#net.bridge.bridge-nf-call-arptables = 0</span><br></pre></td></tr></table></figure>
<p>—/sbin/sysctl -p（重新加载这些参数，不用重启系统）</p>
<h3 id="编辑-etc-profile"><a href="#编辑-etc-profile" class="headerlink" title="编辑/etc/profile"></a>编辑/etc/profile</h3><p>vi /etc/profile 在文件末尾增加以下几行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">if [ $USER = &quot;oracle&quot; ]; then</span><br><span class="line">	if [ $SHELL = &quot;/bin/ksh&quot; ];    </span><br><span class="line">		then</span><br><span class="line">  			ulimit -p 16384</span><br><span class="line">	  		ulimit -n 65536</span><br><span class="line">		else</span><br><span class="line">	  		ulimit -u 16384 -n 65536</span><br><span class="line">	fi</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<p>-注意空格，在用户切换时使用<figure class="highlight plain"><figcaption><span>- username```，这样才会加载后面的环境变量的配置信息（不要使用su username切换）</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### 配置环境变量</span><br><span class="line"></span><br><span class="line">在oracle用户下的```.bash_profile```文件中添加下面信息</span><br><span class="line">vi ~/.bash_profile</span><br></pre></td></tr></table></figure></p>
<p>ORACLE_BASE=/opt/oracle<br>ORACLE_HOME=$ORACLE_BASE/oracle<br>ORACLE_SID=zqaccp(这里要写要安装的oracle的sid)<br>PATH=$ORACLE_HOME/bin:$PATH<br>NLS_LANG=AMERICAN_AMERICA.ZHS16GBK<br>export ORACLE_BASE ORACLE_HOME ORACLE_SID PATH NLS_LANG<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">```source ~/.bash_profile```  </span><br><span class="line"></span><br><span class="line">环境变量立即生效</span><br><span class="line">用echo命令测试环境变量设置是否正确：(出现ORACLE_HOME路径则正确)</span><br><span class="line"></span><br><span class="line">```echo $ORACLE_HOME</span><br></pre></td></tr></table></figure></p>
<hr>
<h3 id="解压缩oracle文件"><a href="#解压缩oracle文件" class="headerlink" title="解压缩oracle文件"></a>解压缩oracle文件</h3><p>切换到root用户</p>
<p>使用：unzip 压缩文件名称    即可</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">unzip linux_11gR2_database_1of2.zip</span><br><span class="line">unzip linux_11gR2_database_2of2.zip</span><br></pre></td></tr></table></figure>
<p>因为是root拷贝过去的，用root解压缩，所以要赋予oracle权限。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chown -R oracle:oinstall /opt/oracle/database</span><br></pre></td></tr></table></figure>
<h3 id="设置编码方式：在oracle用户下："><a href="#设置编码方式：在oracle用户下：" class="headerlink" title="设置编码方式：在oracle用户下："></a>设置编码方式：在oracle用户下：</h3><figure class="highlight plain"><figcaption><span>LANG=en_US.UTF-8```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 五、安装Oracle </span><br><span class="line">### 5.1 解压Oracle安装文件	</span><br><span class="line"></span><br><span class="line">将Oracle拷贝至Linux服务器上,然后解压	</span><br><span class="line">如果使用光盘安装,则使用 mount -t iso9660 /dev/dvd /mnt/dvd 挂载光盘 </span><br><span class="line"></span><br><span class="line">### 5.2 设置安装环境	</span><br><span class="line">如果Linux系统字符编码是中文的,在安装过程中Oracle安装界面会全部乱码。可使用 ```export LANG=en_US``` ,将会话的字符集改为英文字符集,然后再安装就不会出现乱码。	另外,Oracle安装时需要图形界面的支持。</span><br><span class="line">### 5.3 开始安装Oracle</span><br></pre></td></tr></table></figure>
<p>1) cd database/ 切换到安装目录,然后执行 ./runInstaller<br>2)然后点击“next”,进入选择安装类型的界面<br>3)选择“Create and configure a database”,然后点击“next”<br>4)选择“Server Class”,然后点击“next”<br>5)选择“Single instance database installation”,然后点击“next”<br>6)选择“Advanced install”,然后点击“next”<br>7)将简体中文(Simplified Chinese),添加到语言支持,然后点击“next”<br>8)选择“企业版(Enterprise Edition)”,然后点击“next”<br>9)配置安装目录,然后点击“next”<br>10)配置“Oracle Inventory”,然后点击“next”<br>11)选择“General Purpose / Transaction Processing”,然后点击“next”<br>12)配置Oracle的SID,然后点击“next”<br>13)配置内存字符集等，默认就OK，点击“next”<br>14)直接使用默认,然后点击“next”<br>    再点击“next”<br>    再点击“next”<br>15)选择“Use the same password for all account ”配置系统用户的密码,然后点击“next” 如果密码不够复杂,Oracle会提示密码过于简单<br>    直接“yes”(如有需要可以设置的复杂一点)<br>16)直接使用默认,然后点击“next”,开始检查系统环境<br>17)有部分没有通过,这些软件都已安装,这里选择“ignore all”,然后点击“next”,出现 Oracle安装设置信息<br>18)点击“Finish”,开始安装Oracle（等待30分左右……）<br>    稍后会出现创建数据库的界面<br>    数据库创建完后，弹出一个窗口,可以通过“Password Management”可以修改密码,如果不需要直接“OK”,然后弹出下面的窗 口。<br>    提示需要在root用户下执行两个脚本：<br>    oraInstRoot.sh和root.sh<br>    这是需要打开一个命令行,然后切换到Root用户执行这两个脚本,然后点击“OK”,回到安装 界面。<br>    稍候就安装成功！<br>点击“Close”,安装结束。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 测试安装结果</span><br><span class="line"></span><br><span class="line">切换到Oracle用户 ```su - oracle``` ,然后输入 ```sqlplus / as sysdba``` 登录到Oracle数据库, 然后执行 ```desc tab``` ,如果能够打印出表结构证明Oracle已经安装并启动成功了。</span><br><span class="line"></span><br><span class="line">## 修改防火墙配置,将Oracle端口添加 到例外</span><br><span class="line">使用 ```vi /etc/sysconfig/iptables``` ,打开防火墙配置文件。在 ```-A INPUT -i lo -j ACCEPT ```下添加下面的内容,如果有，不需要添加，跳过此步骤</span><br><span class="line">  	-A INPUT -m state --state NEW -m tcp -p tcp --dport 22 -j ACCEPT</span><br><span class="line"></span><br><span class="line">然后使用 ```service iptables restart``` 重启防火墙使配置生效。</span><br><span class="line"></span><br><span class="line">## 将Oracle设置自启动</span><br><span class="line"></span><br><span class="line">使用 ```vi /etc/oratab``` 编辑oratab,进入vi编辑器后,找	到 ```orcl:/opt/oracle/oracle:N``` ,</span><br><span class="line">改	为 ```orcl:/opt/oracle/oracle:Y``` 。修改完成后,保存退出。</span><br><span class="line"></span><br><span class="line">### 然后编辑rc.local</span><br><span class="line"></span><br><span class="line"> ```vi /etc/rc.d/rc.local</span><br></pre></td></tr></table></figure></p>
<p> ####加入下面的内容,并保存####    </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">su oracle -lc &quot;/opt/oracle/oracle/bin/lsnrctl start&quot;</span><br><span class="line">su oracle -lc /opt/oracle/oracle/bin/dbstart</span><br></pre></td></tr></table></figure>
<p>使用 <figure class="highlight plain"><figcaption><span>重启。</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">重启完成后使用 ```lsnrctl status``` 检查监听是否启动。</span><br></pre></td></tr></table></figure></p>
<p>[oracle@oracle ~]$ lsnrctl start           //success 表明成功<br>[oracle@oracle ~]$ dbstart   //启动监听器,我自己试了一下，没启动也没有事情<br>[oracle@oracle ~]$ emctl start dbconsole<br>//自后出现啥啥啥success，代表成功 ，这个是可以启动浏览器的进行的操作<br>/**浏览器中输入<a href="https://localhost:1158/em/" target="_blank" rel="external">https://localhost:1158/em/</a> </p>
<p>```</p>
<h3 id="然后重复-测试安装结果-可测试数据库是否正常启动。"><a href="#然后重复-测试安装结果-可测试数据库是否正常启动。" class="headerlink" title="然后重复 测试安装结果 可测试数据库是否正常启动。"></a>然后重复 <code>测试安装结果</code> 可测试数据库是否正常启动。</h3>
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-CentOS 7 编译Hadoop-2.7.2详解" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/06/13/CentOS 7 编译Hadoop-2.7.2详解/" class="article-date">
      <time datetime="2016-06-13T06:52:30.000Z" itemprop="datePublished">2016-06-13</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/13/CentOS 7 编译Hadoop-2.7.2详解/">CentOS 7 编译Hadoop-2.7.2详解</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h2><p>32位Linux操作系统可以直接下载编译好的Hadoop使用，但是64位Linux操作系统需要自己编译。后来官网从hadoop2.5版本开始就提供了64位。可以直接下载使用。不过自己动手，丰衣足食，就当是学习了。</p>
<p>下面开始：</p>
<h2 id="1-工具准备，最靠谱的是hadoop说明文档里要求具备的那些工具。"><a href="#1-工具准备，最靠谱的是hadoop说明文档里要求具备的那些工具。" class="headerlink" title="1.工具准备，最靠谱的是hadoop说明文档里要求具备的那些工具。"></a>1.工具准备，最靠谱的是hadoop说明文档里要求具备的那些工具。</h2><p>到hadoop官网，点击source下载hadoop-2.7.2-src.tar.gz。</p>
<p>解压之</p>
<p><strong>tar -zxvf hadoop-2.7.2-src.tar.gz</strong></p>
<p>得到hadoop-2.7.2-src文件夹。</p>
<p>进入hadoop-2.7.2-src文件夹，查看BUILDING.txt</p>
<p><strong>cd hadoop-2.7.1-src</strong><br><strong>vim BUILDING.txt</strong></p>
<p>可以看到编译所需的库或者工具：</p>
<p>包括:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">JDK1.7+</span><br><span class="line">maven 3.0 or later</span><br><span class="line">findbugs 1.3.9</span><br><span class="line">protocolBuffer 2.5.0</span><br><span class="line">cmake 2.6</span><br><span class="line">zlib-devel</span><br><span class="line">openssl-devel</span><br></pre></td></tr></table></figure>
<p>除了上面这些，为了不出错，实际还需要autoconf  automake  gcc等。</p>
<p>下面开始准备这些工具：</p>
<p>首先使用su命令获取root权限，以免受到各种限制</p>
<h2 id="2-下载jdk-8u65-linux-x64-tar-gz，解压后移动到-opt目录下"><a href="#2-下载jdk-8u65-linux-x64-tar-gz，解压后移动到-opt目录下" class="headerlink" title="2.下载jdk-8u65-linux-x64.tar.gz，解压后移动到/opt目录下"></a>2.下载jdk-8u65-linux-x64.tar.gz，解压后移动到/opt目录下</h2><p><strong>tar -zxvf jdk-8u65-linux-x64.tar.gz</strong></p>
<p><strong>mv jdk1.8.0_65 /opt</strong></p>
<p>然后打开/etc/profile配置jdk环境变量</p>
<p><strong>vim /etc/profile</strong></p>
<p>按 i 进入插入模式，在文件末尾添加</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">export JAVA_HOME=/opt/jdk1.8.0_65</span><br><span class="line">export CLASSPATH=.:$JAVA_HOME/jre/lib/rt.jar:$JAVA_HOME/lib/tools.jar</span><br><span class="line">export PATH=$PATH:$JAVA_HOME/bin</span><br><span class="line">export JRE_HOME=/opt/jdk1.8.0_65/jre</span><br><span class="line">export PATH=$PATH:$JRE_HOME/bin</span><br></pre></td></tr></table></figure>
<p>先后按Esc, Shift+:， wq， 回车即可保存并退出编辑。</p>
<p>输入 <strong>source /etc/profile</strong> 回车即可保存更改。</p>
<p>运行javac -version 查看状态：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@server1 java]# javac -version</span><br><span class="line">javac 1.8.0_65</span><br><span class="line">[root@server1 java]#</span><br></pre></td></tr></table></figure>
<h2 id="3-安装各种库"><a href="#3-安装各种库" class="headerlink" title="3.安装各种库"></a>3.安装各种库</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum -y install svn ncurses-devel gcc*</span><br><span class="line">yum -y install lzo-devel zlib-devel autoconf automake libtool cmake openssl-devel</span><br></pre></td></tr></table></figure>
<h2 id="4-安装protobuf-2-5-0-tar-gz（注意版本必须是2-5-0）"><a href="#4-安装protobuf-2-5-0-tar-gz（注意版本必须是2-5-0）" class="headerlink" title="4.安装protobuf-2.5.0.tar.gz（注意版本必须是2.5.0）"></a>4.安装protobuf-2.5.0.tar.gz（注意版本必须是2.5.0）</h2><p><strong>tar zxvf protobuf-2.5.0.tar.gz</strong></p>
<p>进入protobuf-2.5.0依次执行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd protobuf-2.5.0</span><br><span class="line">./configure</span><br><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure>
<p>验证安装是否完成</p>
<p><strong>protoc —version</strong></p>
<p>出现</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@server1 protobuf-2.5.0]# protoc --version</span><br><span class="line">libprotoc 2.5.0</span><br><span class="line">[root@server1 protobuf-2.5.0]#</span><br></pre></td></tr></table></figure>
<h2 id="5-安装maven"><a href="#5-安装maven" class="headerlink" title="5.安装maven"></a>5.安装maven</h2><p>下载apache-maven-3.3.9-bin.tar.gz</p>
<p>解压缩并配置环境变量</p>
<p>解压：</p>
<p><strong>tar -zxvf apache-maven-3.3.9-bin.tar.gz</strong></p>
<p>移动到/opt目录下：</p>
<p><strong>mv apache-maven-3.3.9 /opt</strong></p>
<p>配置环境变量：</p>
<p><strong>vim /etc/profile</strong></p>
<p>在末尾添加：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export MAVEN_HOME=/opt/apache-maven-3.3.9</span><br><span class="line">export MAVEN_OPTS=&quot;-Xms256m -Xmx512m&quot;</span><br><span class="line">export PATH=$PATH:$MAVEN_HOME/bin</span><br></pre></td></tr></table></figure>
<p>先按Esc, Shift+:， wq， 回车即可保存并推出编辑。</p>
<p>输入 <strong>source /etc/profile</strong> 回车即可保存更改。</p>
<p>查看安装状态： <strong>mvn -version</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@server1 ~]# mvn -version</span><br><span class="line">Apache Maven 3.3.9 (bb52d8502b132ec0a5a3f4c09453c07478323dc5; 2015-11-11T00:41:47+08:00)</span><br><span class="line">Maven home: /usr/local/maven-3.3.9</span><br><span class="line">Java version: 1.8.0_65, vendor: Oracle Corporation</span><br><span class="line">Java home: /usr/java/jdk1.8.0_65/jre</span><br><span class="line">Default locale: en_US, platform encoding: UTF-8</span><br><span class="line">OS name: &quot;linux&quot;, version: &quot;3.10.0-229.el7.x86_64&quot;, arch: &quot;amd64&quot;, family: &quot;unix&quot;</span><br><span class="line">[root@server1 ~]#</span><br></pre></td></tr></table></figure>
<p>6.安装ant</p>
<p>下载apache-ant-1.9.7-bin.tar.gz</p>
<p>解压缩并配置环境变量</p>
<p>解压：</p>
<p><strong>tar -zxvf apache-ant-1.9.7-bin.tar.gz</strong></p>
<p>移动到/opt目录下</p>
<p><strong>mv apache-ant-1.9.7 /opt</strong></p>
<p>配置环境变量</p>
<p>同上，在/etc/profile文件末未添加：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export ANT_HOME=/opt/apache-ant-1.9.7</span><br><span class="line">export PATH=$PATH:$ANT_HOME/bin</span><br></pre></td></tr></table></figure>
<p>然后保存，退出，并使更改生效。</p>
<p>查看安装结果：</p>
<p>ant -version</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@server1 ~]# ant -version</span><br><span class="line">Apache Ant(TM) version 1.9.7 compiled on April 9 2016</span><br><span class="line">[root@server1 ~]#</span><br></pre></td></tr></table></figure>
<h2 id="7-安装findbugs"><a href="#7-安装findbugs" class="headerlink" title="7.安装findbugs"></a>7.安装findbugs</h2><p>下载findbugs-3.0.1.tar.gz，选择上面的standard version即可</p>
<p>解压缩并配置环境变量</p>
<p>解压：</p>
<p><strong>tar -zxvf findbugs-3.0.1.tar.gz</strong></p>
<p>移动到 /opt目录下</p>
<p><strong>mv findbugs-3.0.1 /opt</strong></p>
<p>配置环境变量:</p>
<p>在 /etc/profile 文件末尾添加：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export FINDBUGS_HOME=/opt/findbugs-3.0.1</span><br><span class="line">export PATH=$PATH:$FINDBUGS_HOME/bin</span><br></pre></td></tr></table></figure>
<p>保存退出，并使更改生效。</p>
<p>查看安装结果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@server1 ~]# findbugs -version</span><br><span class="line">3.0.1</span><br><span class="line">[root@server1 ~]#</span><br></pre></td></tr></table></figure>
<h2 id="8-准备完成，下面开始编译hadoop"><a href="#8-准备完成，下面开始编译hadoop" class="headerlink" title="8.准备完成，下面开始编译hadoop"></a>8.准备完成，下面开始编译hadoop</h2><p>进入到hadoop-2.7.2-src目录</p>
<p>使用命令：</p>
<p><strong>mvn clean package –Pdist,native –DskipTests –Dtar</strong></p>
<p>或者：</p>
<p><strong>mvn package -Pdist,native -DskipTests -Dtar</strong></p>
<p>进行编译。　　</p>
<p>务必保持网络畅通，经过漫长的等待，看到下图即表明编译成功！</p>
<p>由于本人的网络中途出现问题，重新编译了一次，差不多折腾了3个小时。</p>
<p><strong>编译好的文件在/hadoop-dist/target/hadoop-2.7.2.tar.gz下</strong>。</p>
<p>注意事项：</p>
<p>1.所有命令，建议手敲，不建议复制粘贴，以避免因为页面空格造成的不必要错误。</p>
<p>2.务必保持网络畅通，如果出现缺少某个文件，则要先清理maven(使用命令 mvn clean) 再重新编译。</p>
<p>3.如果总是出现同一个错误导致编译失败，则可能是缺少某个库或者工具，检查上述工具是否都安装成功，并且版本正确。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/编译Hadoop-CentOS-7/">编译Hadoop CentOS 7</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-测试" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/06/13/测试/" class="article-date">
      <time datetime="2016-06-13T06:52:30.000Z" itemprop="datePublished">2016-06-13</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/13/测试/">测试</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>我只是一个测试~ :) 哈哈 还不错哟！</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2016 原豪
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="A fast, simple &amp; powerful blog framework">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="Another simple and elegant theme for Hexo  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" >Site Visitors: 
                            <span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>, </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit">Page Hits: 
                            <span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 5;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>




<div class="scroll" id="scroll">
    <a href="#" title="Back to Top"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="Comments"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="Go to Bottom"><i class="fa fa-arrow-down"></i></a>
</div>
<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>